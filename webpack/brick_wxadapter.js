!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=31)}([function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.default={d:function(e,t,n){BK.Script.log(e,t,n)}}},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GameRes",n=e;return"GameRes"===t?n="GameRes://"+n:"GameSandBox"===t&&(n="GameSandBox://"+n),n}}]),e}();t.default=r,r.SCHEMA_RES="GameRes",r.SCHEMA_SAND="GameSandBox"},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.setTimeout=o,t.clearTimeout=a,t.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=GameGlobal._fpsinterval,i=o(e,n);return t+n,i},t.setPreferredFramesPerSecond=function(e){GameGlobal._fpsinterval=1-1*e/60},t.cancelAnimationFrame=function(e){a(e)},t.setInterval=function(e,t){var n=new BK.Ticker;n.interval=60*t/1e3,n.setTickerCallBack(function(t,n){e()});var i=++r;return GameGlobal.intervals[i]={i:i,ticker:n},i},t.clearInterval=function(e){e&&GameGlobal.intervals[e]&&(GameGlobal.intervals[e].ticker.dispose(),delete GameGlobal.intervals[e])},GameGlobal.timers={},GameGlobal.intervals={},GameGlobal._fpsinterval=0;var i=0,r=0;BK.Director.ticker.add(function(e,t){Object.keys(GameGlobal.timers).map(function(t){var n=GameGlobal.timers[t];n.b+n.t<=e&&(delete GameGlobal.timers[t],n.f&&n.f(e))})});function o(e,t){t||(t=0);var n=++i;return GameGlobal.timers[n]={b:Date.now(),t:t,f:e},n}function a(e){delete GameGlobal.timers[e]}},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.isRemoteUrl=o,t.wrapLocalUrl=a,t.wrapSandBoxPath=u,t.extractFileNameFromUrl=l,t.extractFilePathFromUrl=c,t.getImgPath=function(e){var t=void 0;if(o(e)){var n=c(e)+l(e);n.replace("/","#"),n.replace("\\","#"),t=u("download/images/"+n)}else 0==e.indexOf(i)||0==e.indexOf(r)?t=e:(t=a(e),BK.FileUtil.isFileExist(t)||(t=u(e)));return t},t.getAudioPath=function(e){var t=void 0;if(o(e)){var n=l(e);t=u("download/audio/"+n)}else t=a(e);return t},t.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:parseInt(t[4],16)}:null},t.colourNameToHex=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return void 0!==t[e.toLowerCase()]&&t[e.toLowerCase()]};var i="GameRes://",r="GameSandBox://";function o(e){return/^https?:\/\//.test(e)}function a(e){return/^GameRes:\/\//.test(e)?e:"GameRes://"+e.replace(/^\.*\//,"")}function u(e){return/^GameSandBox:\/\//.test(e)?e:"GameSandBox://"+e.replace(/^\.*\//,"")}function l(e){var t=e.lastIndexOf("/");return-1==t&&(t=e.lastIndexOf("\\")),e.substr(t+1)}function c(e){var t=0;t=e.startsWith("https")?e.substr(8).indexOf("/")+9:e.startsWith("http")?e.substr(7).indexOf("/")+8:e.indexOf("/")+1;var n=e.lastIndexOf("/");return e.substring(t,n)+"/"}},function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function i(e,t){var i=e.prototype;if(Object.create){var r=Object.create(t.prototype);i.__proto__=r}if(!(i instanceof t)){function o(){}o.prototype=t.prototype,n(i,o=new o),e.prototype=i=o}i.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),i.constructor=e)}var r="http://www.w3.org/1999/xhtml",o={},a=o.ELEMENT_NODE=1,u=o.ATTRIBUTE_NODE=2,l=o.TEXT_NODE=3,c=o.CDATA_SECTION_NODE=4,s=o.ENTITY_REFERENCE_NODE=5,f=o.ENTITY_NODE=6,d=o.PROCESSING_INSTRUCTION_NODE=7,h=o.COMMENT_NODE=8,p=o.DOCUMENT_NODE=9,g=o.DOCUMENT_TYPE_NODE=10,m=o.DOCUMENT_FRAGMENT_NODE=11,v=o.NOTATION_NODE=12,E={},y={},_=(E.INDEX_SIZE_ERR=(y[1]="Index size error",1),E.DOMSTRING_SIZE_ERR=(y[2]="DOMString size error",2),E.HIERARCHY_REQUEST_ERR=(y[3]="Hierarchy request error",3)),b=(E.WRONG_DOCUMENT_ERR=(y[4]="Wrong document",4),E.INVALID_CHARACTER_ERR=(y[5]="Invalid character",5),E.NO_DATA_ALLOWED_ERR=(y[6]="No data allowed",6),E.NO_MODIFICATION_ALLOWED_ERR=(y[7]="No modification allowed",7),E.NOT_FOUND_ERR=(y[8]="Not found",8)),S=(E.NOT_SUPPORTED_ERR=(y[9]="Not supported",9),E.INUSE_ATTRIBUTE_ERR=(y[10]="Attribute in use",10));E.INVALID_STATE_ERR=(y[11]="Invalid state",11),E.SYNTAX_ERR=(y[12]="Syntax error",12),E.INVALID_MODIFICATION_ERR=(y[13]="Invalid modification",13),E.NAMESPACE_ERR=(y[14]="Invalid namespace",14),E.INVALID_ACCESS_ERR=(y[15]="Invalid access",15);function T(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,y[e]),this.message=y[e],Error.captureStackTrace&&Error.captureStackTrace(this,T);return n.code=e,t&&(this.message=this.message+": "+t),n}function A(){}function w(e,t){this._node=e,this._refresh=t,C(this)}function C(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var i=e._refresh(e._node);ne(e,"length",i.length),n(i,e),e._inc=t}}function k(){}function N(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function I(e,t,n,i){if(i?t[N(t,i)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(i&&x(r,e,i),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(r,e,n))}}function B(e,t,n){var i=N(t,n);if(!(i>=0))throw T(b,new Error(e.tagName+"@"+n));for(var r=t.length-1;i<r;)t[i]=t[++i];if(t.length=r,e){var o=e.ownerDocument;o&&(x(o,e,n),n.ownerElement=null)}}function R(e){if(this._features={},e)for(var t in e)this._features=e[t]}function P(){}function O(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function F(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(F(e,t))return!0}while(e=e.nextSibling)}function M(){}function x(e,t,n,i){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function U(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{for(var r=t.firstChild,o=0;r;)i[o++]=r,r=r.nextSibling;i.length=o}}}function D(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,U(e.ownerDocument,e),t}function L(e,t,n){var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===m){var r=t.firstChild;if(null==r)return t;var o=t.lastChild}else r=o=t;var a=n?n.previousSibling:e.lastChild;r.previousSibling=a,o.nextSibling=n,a?a.nextSibling=r:e.firstChild=r,null==n?e.lastChild=o:n.previousSibling=o;do{r.parentNode=e}while(r!==o&&(r=r.nextSibling));return U(e.ownerDocument||e,e),t.nodeType==m&&(t.firstChild=t.lastChild=null),t}function K(){this._nsMap={}}function G(){}function j(){}function V(){}function H(){}function X(){}function z(){}function q(){}function W(){}function Y(){}function Q(){}function $(){}function J(){}function Z(e,t){var n=[],i=9==this.nodeType?this.documentElement:this,r=i.prefix,o=i.namespaceURI;if(o&&null==r&&null==(r=i.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return te(this,n,e,t,a),n.join("")}function ee(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(!i&&!r)return!1;if("xml"===i&&"http://www.w3.org/XML/1998/namespace"===r||"http://www.w3.org/2000/xmlns/"==r)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix==i)return a.namespace!=r}return!0}function te(e,t,n,i,o){if(i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case a:o||(o=[]);o.length;var f=e.attributes,v=f.length,E=e.firstChild,y=e.tagName;n=r===e.namespaceURI||n,t.push("<",y);for(var _=0;_<v;_++){"xmlns"==(b=f.item(_)).prefix?o.push({prefix:b.localName,namespace:b.value}):"xmlns"==b.nodeName&&o.push({prefix:"",namespace:b.value})}for(_=0;_<v;_++){var b;if(ee(b=f.item(_),0,o)){var S=b.prefix||"",T=b.namespaceURI,A=S?" xmlns:"+S:" xmlns";t.push(A,'="',T,'"'),o.push({prefix:S,namespace:T})}te(b,t,n,i,o)}if(ee(e,0,o)){S=e.prefix||"",T=e.namespaceURI,A=S?" xmlns:"+S:" xmlns";t.push(A,'="',T,'"'),o.push({prefix:S,namespace:T})}if(E||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(y)){if(t.push(">"),n&&/^script$/i.test(y))for(;E;)E.data?t.push(E.data):te(E,t,n,i,o),E=E.nextSibling;else for(;E;)te(E,t,n,i,o),E=E.nextSibling;t.push("</",y,">")}else t.push("/>");return;case p:case m:for(E=e.firstChild;E;)te(E,t,n,i,o),E=E.nextSibling;return;case u:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,O),'"');case l:return t.push(e.data.replace(/[<&]/g,O));case c:return t.push("<![CDATA[",e.data,"]]>");case h:return t.push("\x3c!--",e.data,"--\x3e");case g:var w=e.publicId,C=e.systemId;if(t.push("<!DOCTYPE ",e.name),w)t.push(' PUBLIC "',w),C&&"."!=C&&t.push('" "',C),t.push('">');else if(C&&"."!=C)t.push(' SYSTEM "',C,'">');else{var k=e.internalSubset;k&&t.push(" [",k,"]"),t.push(">")}return;case d:return t.push("<?",e.target," ",e.data,"?>");case s:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ne(e,t,n){e[t]=n}T.prototype=Error.prototype,n(E,T),A.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)te(this[i],n,e,t);return n.join("")}},w.prototype.item=function(e){return C(this),this[e]},i(w,A),k.prototype={length:0,item:A.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new T(S);var n=this.getNamedItem(e.nodeName);return I(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new T(S);return t=this.getNamedItemNS(e.namespaceURI,e.localName),I(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return B(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return B(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},R.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var i=new M;if(i.implementation=this,i.childNodes=new A,i.doctype=n,n&&i.appendChild(n),t){var r=i.createElementNS(e,t);i.appendChild(r)}return i},createDocumentType:function(e,t,n){var i=new z;return i.name=e,i.nodeName=e,i.publicId=t,i.systemId=n,i}},P.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return L(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return D(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,i){var r=new n.constructor;for(var o in n){var l=n[o];"object"!=typeof l&&l!=r[o]&&(r[o]=l)}n.childNodes&&(r.childNodes=new A);r.ownerDocument=t;switch(r.nodeType){case a:var c=n.attributes,s=r.attributes=new k,f=c.length;s._ownerElement=r;for(var d=0;d<f;d++)r.setAttributeNode(e(t,c.item(d),!0));break;case u:i=!0}if(i)for(var h=n.firstChild;h;)r.appendChild(e(t,h,i)),h=h.nextSibling;return r}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==l&&e.nodeType==l?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var i in n)if(n[i]==e)return i;t=t.nodeType==u?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==u?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(o,P),n(o,P.prototype),M.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==m){for(var n=e.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e}return null==this.documentElement&&e.nodeType==a&&(this.documentElement=e),L(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),D(this,e)},importNode:function(e,t){return function e(t,n,i){var r;switch(n.nodeType){case a:(r=n.cloneNode(!1)).ownerDocument=t;case m:break;case u:i=!0}r||(r=n.cloneNode(!1));r.ownerDocument=t;r.parentNode=null;if(i)for(var o=n.firstChild;o;)r.appendChild(e(t,o,i)),o=o.nextSibling;return r}(this,e,t)},getElementById:function(e){var t=null;return F(this.documentElement,function(n){if(n.nodeType==a&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new K;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new A,(t.attributes=new k)._ownerElement=t,t},createDocumentFragment:function(){var e=new Q;return e.ownerDocument=this,e.childNodes=new A,e},createTextNode:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new H;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new X;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new $;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new G;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new Y;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new K,i=t.split(":"),r=n.attributes=new k;return n.childNodes=new A,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new G,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},i(M,P),K.prototype={nodeType:a,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===m?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var i=e.lastChild;n.removeChild(t),i=e.lastChild}return i=e.lastChild,t.parentNode=e,t.previousSibling=i,t.nextSibling=null,i?i.nextSibling=t:e.firstChild=t,e.lastChild=t,U(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new w(this,function(t){var n=[];return F(t,function(i){i===t||i.nodeType!=a||"*"!==e&&i.tagName!=e||n.push(i)}),n})},getElementsByTagNameNS:function(e,t){return new w(this,function(n){var i=[];return F(n,function(r){r===n||r.nodeType!==a||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)}),i})}},M.prototype.getElementsByTagName=K.prototype.getElementsByTagName,M.prototype.getElementsByTagNameNS=K.prototype.getElementsByTagNameNS,i(K,P),G.prototype.nodeType=u,i(G,P),j.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(y[_])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},i(j,P),V.prototype={nodeName:"#text",nodeType:l,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},i(V,j),H.prototype={nodeName:"#comment",nodeType:h},i(H,j),X.prototype={nodeName:"#cdata-section",nodeType:c},i(X,j),z.prototype.nodeType=g,i(z,P),q.prototype.nodeType=v,i(q,P),W.prototype.nodeType=f,i(W,P),Y.prototype.nodeType=s,i(Y,P),Q.prototype.nodeName="#document-fragment",Q.prototype.nodeType=m,i(Q,P),$.prototype.nodeType=d,i($,P),J.prototype.serializeToString=function(e,t,n){return Z.call(e,t,n)},P.prototype.toString=Z;try{if(Object.defineProperty){Object.defineProperty(w.prototype,"length",{get:function(){return C(this),this.$$length}}),Object.defineProperty(P.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case a:case m:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case a:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ne=function(e,t,n){e["$$"+t]=n}}}catch(e){}t.DOMImplementation=R,t.XMLSerializer=J},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0);(i=o)&&i.__esModule;var a=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.touchEventStartcb=[],this.touchEventMovecb=[],this.touchEventEndcb=[],this.touchEventCancelcb=[]}return r(e,[{key:"dispatchEvent",value:function(){var e=this;BK.Director.ticker.add(function(){var t=BK.TouchEvent.getTouchEvent();if(void 0!=t)t.map(function(t){var n=t.x,i=BK.Director.screenPixelSize.height-t.y,r=BK.Director.screenPixelSize.width/BK.Director.renderSize.width;n=n,i=i;var o={identifier:t.id,id:t.id,screenX:n/r,screenY:i/r,clientX:n,clientY:i,pageX:n/r,pageY:i/r};return 2==t.status?e.touchEventStartcb.map(function(e){e({touches:[o],changedTouches:[o],timeStamp:Date.now(),preventDefault:function(){}})}):3==t.status?e.touchEventMovecb.map(function(e){e({touches:[o],changedTouches:[o],timeStamp:Date.now(),preventDefault:function(){}})}):1==t.status&&e.touchEventEndcb.map(function(e){e({touches:[o],changedTouches:[o],timeStamp:Date.now(),preventDefault:function(){}})}),o},e);BK.TouchEvent.updateTouchStatus()})}},{key:"onTouchStart",value:function(e){null!=e&&this.touchEventStartcb.push(e)}},{key:"onTouchMove",value:function(e){this.touchEventMovecb.push(e)}},{key:"onTouchCancel",value:function(e){this.touchEventCancelcb.push(e)}},{key:"onTouchEnd",value:function(e){this.touchEventEndcb.push(e)}},{key:"offTouchStart",value:function(e){var t=this.touchEventStartcb.indexOf(e);this.touchEventStartcb.splice(t,1)}},{key:"offTouchMove",value:function(e){var t=this.touchEventMovecb.indexOf(e);this.touchEventMovecb.splice(t,1)}},{key:"offTouchCancel",value:function(e){var t=this.touchEventCancelcb.indexOf(e);this.touchEventCancelcb.splice(t,1)}},{key:"offTouchEnd",value:function(e){var t=this.touchEventEndcb.indexOf(e);this.touchEventEndcb.splice(t,1)}}]),e}());a.dispatchEvent(),t.default=a},function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,i=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+n.source+i.source+"*(?::"+n.source+i.source+"*)?$"),o=0,a=1,u=2,l=3,c=4,s=5,f=6,d=7;function h(){}function p(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function g(e,t,n,i,r,h){for(var p,g=++t,m=o;;){var v=e.charAt(g);switch(v){case"=":if(m===a)p=e.slice(t,g),m=l;else{if(m!==u)throw new Error("attribute equal must after attrName");m=l}break;case"'":case'"':if(m===l||m===a){if(m===a&&(h.warning('attribute value must after "="'),p=e.slice(t,g)),t=g+1,!((g=e.indexOf(v,t))>0))throw new Error("attribute value no end '"+v+"' match");E=e.slice(t,g).replace(/&#?\w+;/g,r),n.add(p,E,t-1),m=s}else{if(m!=c)throw new Error('attribute value must after "="');E=e.slice(t,g).replace(/&#?\w+;/g,r),n.add(p,E,t),h.warning('attribute "'+p+'" missed start quot('+v+")!!"),t=g+1,m=s}break;case"/":switch(m){case o:n.setTagName(e.slice(t,g));case s:case f:case d:m=d,n.closed=!0;case c:case a:case u:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return h.error("unexpected end of input"),m==o&&n.setTagName(e.slice(t,g)),g;case">":switch(m){case o:n.setTagName(e.slice(t,g));case s:case f:case d:break;case c:case a:"/"===(E=e.slice(t,g)).slice(-1)&&(n.closed=!0,E=E.slice(0,-1));case u:m===u&&(E=p),m==c?(h.warning('attribute "'+E+'" missed quot(")!!'),n.add(p,E.replace(/&#?\w+;/g,r),t)):("http://www.w3.org/1999/xhtml"===i[""]&&E.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+E+'" missed value!! "'+E+'" instead!!'),n.add(E,E,t));break;case l:throw new Error("attribute value missed!!")}return g;case"":v=" ";default:if(v<=" ")switch(m){case o:n.setTagName(e.slice(t,g)),m=f;break;case a:p=e.slice(t,g),m=u;break;case c:var E=e.slice(t,g).replace(/&#?\w+;/g,r);h.warning('attribute "'+E+'" missed quot(")!!'),n.add(p,E,t);case s:m=f}else switch(m){case u:n.tagName;"http://www.w3.org/1999/xhtml"===i[""]&&p.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+p+'" missed value!! "'+p+'" instead2!!'),n.add(p,p,t),t=g,m=a;break;case s:h.warning('attribute space is required"'+p+'"!!');case f:m=a,t=g;break;case l:m=c,t=g;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}g++}}function m(e,t,n){for(var i=e.tagName,r=null,o=e.length;o--;){var a=e[o],u=a.qName,l=a.value;if((d=u.indexOf(":"))>0)var c=a.prefix=u.slice(0,d),s=u.slice(d+1),f="xmlns"===c&&s;else s=u,c=null,f="xmlns"===u&&"";a.localName=s,!1!==f&&(null==r&&(r={},y(n,n={})),n[f]=r[f]=l,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(f,l))}for(o=e.length;o--;){(c=(a=e[o]).prefix)&&("xml"===c&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(a.uri=n[c||""]))}var d;(d=i.indexOf(":"))>0?(c=e.prefix=i.slice(0,d),s=e.localName=i.slice(d+1)):(c=null,s=e.localName=i);var h=e.uri=n[c||""];if(t.startElement(h,s,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=r,!0;if(t.endElement(h,s,i),r)for(c in r)t.endPrefixMapping(c)}function v(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(r.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,i),r.characters(a,0,a.length),o)}return t+1}function E(e,t,n,i){var r=i[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}function y(e,t){for(var n in e)t[n]=e[n]}function _(e,t,n,i){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,r-t-4),r+3):(i.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3}var o=function(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);for(;n=r.exec(e);)if(i.push(n),n[1])return i}(e,t),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var u=o[1][0],l=a>3&&/^public$/i.test(o[2][0])&&o[3][0],c=a>4&&o[4][0],s=o[a-1];return n.startDTD(u,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),s.index+s[0].length}}return-1}function b(e,t,n){var i=e.indexOf("?>",t);if(i){var r=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),i+2}return-1}return-1}function S(e){}function T(e,t){return e.__proto__=t,e}h.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),y(t,t={}),function(e,t,n,i,r){function o(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(r.error("entity not found:"+e),e)}function a(t){if(t>y){var n=e.substring(y,t).replace(/&#?\w+;/g,o);f&&u(y),i.characters(n,0,t-y),y=t}}function u(t,n){for(;t>=c&&(n=s.exec(e));)l=n.index,c=l+n[0].length,f.lineNumber++;f.columnNumber=t-l+1}var l=0,c=0,s=/.*(?:\r\n?|\n)|.*$/g,f=i.locator,d=[{currentNSMap:t}],h={},y=0;for(;;){try{var T=e.indexOf("<",y);if(T<0){if(!e.substr(y).match(/^\s*$/)){var A=i.doc,w=A.createTextNode(e.substr(y));A.appendChild(w),i.currentElement=w}return}switch(T>y&&a(T),e.charAt(T+1)){case"/":var C=e.indexOf(">",T+3),k=e.substring(T+2,C),N=d.pop();C<0?(k=e.substring(T+2).replace(/[\s<].*/,""),r.error("end tag name: "+k+" is not complete:"+N.tagName),C=T+1+k.length):k.match(/\s</)&&(k=k.replace(/[\s<].*/,""),r.error("end tag name: "+k+" maybe not complete"),C=T+1+k.length);var I=N.localNSMap,B=N.tagName==k,R=B||N.tagName&&N.tagName.toLowerCase()==k.toLowerCase();if(R){if(i.endElement(N.uri,N.localName,k),I)for(var P in I)i.endPrefixMapping(P);B||r.fatalError("end tag name: "+k+" is not match the current start tagName:"+N.tagName)}else d.push(N);C++;break;case"?":f&&u(T),C=b(e,T,i);break;case"!":f&&u(T),C=_(e,T,i,r);break;default:f&&u(T);var O=new S,F=d[d.length-1].currentNSMap,C=g(e,T,O,F,o,r),M=O.length;if(!O.closed&&E(e,C,O.tagName,h)&&(O.closed=!0,n.nbsp||r.warning("unclosed xml attribute")),f&&M){for(var x=p(f,{}),U=0;U<M;U++){var D=O[U];u(D.offset),D.locator=p(f,{})}i.locator=x,m(O,i,F)&&d.push(O),i.locator=f}else m(O,i,F)&&d.push(O);"http://www.w3.org/1999/xhtml"!==O.uri||O.closed?C++:C=v(e,C,O.tagName,o,i)}}catch(e){r.error("element parse error: "+e),C=-1}C>y?y=C:a(Math.max(T,y)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},S.prototype={setTagName:function(e){if(!r.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!r.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},T({},T.prototype)instanceof T||(T=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=h},function(e,t,n){function i(e){this.options=e||{locator:{}}}function r(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function u(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function l(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}i.prototype.parseFromString=function(e,t){var n=this.options,i=new c,o=n.domBuilder||new r,u=n.errorHandler,l=n.locator,s=n.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return l&&o.setDocumentLocator(l),i.errorHandler=function(e,t,n){if(!e){if(t instanceof r)return t;e=t}var i={},o=e instanceof Function;function u(t){var r=e[t];!r&&o&&(r=2==e.length?function(n){e(t,n)}:e),i[t]=r&&function(e){r("[xmldom "+t+"]\t"+e+a(n))}||function(){}}return n=n||{},u("warning"),u("error"),u("fatalError"),i}(u,o,l),i.domBuilder=n.domBuilder||o,/\/x?html?$/.test(t)&&(f.nbsp=" ",f.copy="©",s[""]="http://www.w3.org/1999/xhtml"),s.xml=s.xml||"http://www.w3.org/XML/1998/namespace",e?i.parse(e,s,f):i.errorHandler.error("invalid doc source"),o.doc},r.prototype={startDocument:function(){this.doc=(new s).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var r=this.doc,a=r.createElementNS(e,n||t),u=i.length;l(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var c=0;c<u;c++){e=i.getURI(c);var s=i.getValue(c),f=(n=i.getQName(c),r.createAttributeNS(e,n));this.locator&&o(i.getLocator(c),f),f.value=f.nodeValue=s,a.setAttributeNode(f)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&o(this.locator,n),l(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=u.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&o(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=u.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&o(this.locator,i),l(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(e,t,n);this.locator&&o(this.locator,r),l(this,r)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){r.prototype[e]=function(){return null}});var c=n(6).XMLReader,s=t.DOMImplementation=n(4).DOMImplementation;t.XMLSerializer=n(4).XMLSerializer,t.DOMParser=i},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"getNetworkType",value:function(e){var t="3g";switch(GameStatusInfo.networkType){case 1:case 2:case 3:t="3g";break;case 0:t="wifi";break;default:t="unknown"}return t}},{key:"onNetworkStatusChange",value:function(e){}}]),e}();t.default=r},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();r(n(0)),r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._event={}}return i(e,[{key:"startAccelerometer",value:function(e){e.success,e.fail,e.complete;console.log("Accelerometer not support yet"),BK.Script.log(1,0,"Accelerometer startAcelerometer  not support yet")}},{key:"stopAccelerometer",value:function(e){console.log("Accelerometer not support yet"),BK.Script.log(1,0,"Accelerometer stopAccelerometer not support yet")}},{key:"onAccelerometerChange",value:function(e){this.addEventListener("accelerometerChange",e.callback),console.log("Accelerometer not support yet"),BK.Script.log(1,0,"Accelerometer onAccelerometerChange not support yet")}},{key:"addEventListener",value:function(e,t,n){this._event[e]||(this._event[e]=[]),this._event[e].push(t),n&&n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n&&n.once,n&&n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._event[e.type];if(void 0!==t)for(var n=0;n<t.length;n++)t[n](e)}}]),e}();t.default=o},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();r(n(0)),r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"showToast",value:function(e){console.log("showToast not implemented yet",e)}},{key:"hideToast",value:function(){console.log("hideToast not implemented yet")}},{key:"showLoading",value:function(e){console.log("showLoading not implemented yet",e),e&&e.success&&e.success(),e&&e.complete&&e.complete()}},{key:"hideLoading",value:function(){console.log("hideLoading not implemented yet")}},{key:"showModal",value:function(e){console.log("showModal not implemented yet",e),e&&e.success&&e.success()}}]),e}();t.default=o},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o="GameSandBox://localStorage/storage",a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bkStorageCacheInit=!1,this.initStorage()}return r(e,[{key:"initStorage",value:function(){if(!this.bkStorageCacheInit){if(BK.FileUtil.isFileExist(o)){var e=BK.FileUtil.readFile(o);"object"===(void 0===e?"undefined":i(e))?this.bkStorageCacheMap=new Map(JSON.parse(e.readAsString())):this.bkStorageCacheMap=new Map}else this.bkStorageCacheMap=new Map;this.bkStorageCacheInit=!0}}},{key:"setStorage",value:function(e){if(console.log("set storage :"+JSON.stringify(e)),e&&e.key&&e.data){this.initStorage(),this.bkStorageCacheMap.set(e.key,e.data);var t=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(o,t),e.success&&e.success(),e.complete&&e.complete()}}},{key:"setStorageSync",value:function(e,t){if(console.log("set storage sync  :"+e+" "+t),e&&t){this.initStorage(),this.bkStorageCacheMap.set(e,t);var n=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(o,n)}}},{key:"getStorage",value:function(e){if(console.log("get storage :"+JSON.stringify(e)),e&&e.key){this.initStorage();var t=this.bkStorageCacheMap.get(e.key);console.log("get storage result :"+JSON.stringify(t)),t?e.success&&e.success({data:t}):e.fail&&e.fail(),e.complete&&e.complete()}}},{key:"getStorageSync",value:function(e){if(e)return this.initStorage(),console.log("get storage sync :"+e+" "+this.bkStorageCacheMap.get(e)),this.bkStorageCacheMap.get(e)}},{key:"getStorageInfoSync",value:function(){this.initStorage();var e=new Array;this.bkStorageCacheMap.forEach(function(t,n,i){e.push(n)});var t=0;if(BK.FileUtil.isFileExist(o)){var n=BK.FileUtil.getFileInfo(o);n&&(t=n.size/1024)}return{keys:e,currentSize:t,limitSize:10240}}},{key:"getStorageInfo",value:function(e){if(e){this.initStorage();var t=new Array;this.bkStorageCacheMap.forEach(function(e,n,i){t.push(n)});var n=0;if(BK.FileUtil.isFileExist(o)){var i=BK.FileUtil.getFileInfo(o);i&&(n=i.size/1024)}var r={keys:t,currentSize:n,limitSize:10240};e.success&&e.success(r),e.complete&&e.complete()}}},{key:"removeStorage",value:function(e){if(e&&e.key){this.initStorage(),this.bkStorageCacheMap.delete(e.key);var t=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(o,t),e.success&&e.success(),e.complete&&e.complete()}}},{key:"removeStorageSync",value:function(e){if(e){this.initStorage(),this.bkStorageCacheMap.delete(e);var t=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(o,t)}}},{key:"clearStorage",value:function(e){this.bkStorageCacheMap&&this.bkStorageCacheMap.clear();var t=!0;BK.FileUtil.isFileExist(o)&&(t=BK.FileUtil.deleteFile(o)),t?e.success&&e.success():e.fail&&e.fail(),e.complete&&e.complete()}},{key:"clearStorageSync",value:function(){this.bkStorageCacheMap&&this.bkStorageCacheMap.clear(),BK.FileUtil.isFileExist(o)&&BK.FileUtil.deleteFile(o)}}]),e}();t.default=a},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.midasCancelPay=function(e){a.default.d(0,0,"midasCancelPay failed, see bk interface")},t.midasGetBalance=function(e){a.default.d(0,0,"midasGetBalance failed, see bk interface")},t.midasPay=function(e){a.default.d(0,0,"midasPay failed, see bk interface")},t.midasPresent=function(e){a.default.d(0,0,"midasPresent failed, see bk interface")};var r,o=n(0),a=(r=o)&&r.__esModule?r:{default:r};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"requestMidasPayment",value:function(e){a.default.d(0,0,"requestMidasPayment failed, see bk interface")}}]),e}();t.default=u},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.RewardedVideoAd=t.BannerAd=void 0;var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=(i=o)&&i.__esModule?i:{default:i};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.BannerAd=function(){function e(t,n){u(this,e),this.adUnitId=t,this.style=n}return r(e,[{key:"show",value:function(){this.adBannerHandle&&this.adBannerHandle.close();var e=this;return new Promise(function(t,n){BK.Advertisement.fetchBannerAd(function(i,r,o){0==i?(o.show(function(i,r,o){0==i?(e.onLoadCallback&&e.onLoadCallback(),t()):(e.onErrorCallback&&e.onErrorCallback(),a.default.d(0,0,"fetchBannerAd failed, msg="+r),n(r))}),o.onClickContent(function(){e.onClickCallback&&e.onClickCallback()}),o.onClickClose(function(){e.onClickCloseCallback&&e.onClickCloseCallback()}),e.adBannerHandle=o):(e.onErrorCallback&&e.onErrorCallback(),a.default.d(0,0,"fetchBannerAd failed, msg="+r),n(r))})})}},{key:"hide",value:function(){this.adBannerHandle&&this.adBannerHandle.close()}},{key:"onResize",value:function(e){a.default.d(0,0,"BannerAd: onResize, not implement yet")}},{key:"offResize",value:function(e){a.default.d(0,0,"BannerAd: offResize, not implement yet")}},{key:"onLoad",value:function(e){this.onLoadCallback=e}},{key:"offLoad",value:function(e){this.onLoadCallback=void 0}},{key:"onError",value:function(e){this.onErrorCallback=e}},{key:"offError",value:function(e){this.onErrorCallback=void 0}},{key:"onClickContent",value:function(e){this.onClickCallback=e}},{key:"offClickContent",value:function(e){this.onClickCallback=void 0}},{key:"onClickClose",value:function(e){this.onClickCloseCallback=e}},{key:"offClickClose",value:function(e){this.onClickCloseCallback=void 0}},{key:"destroy",value:function(){}}]),e}(),t.RewardedVideoAd=function(){function e(t,n,i){u(this,e),this.adUnitId=t,this.style=n,this.videoType=i}return r(e,[{key:"show",value:function(){void 0===this.videoType&&(this.videoType=3);var e=this;return new Promise(function(t,n){BK.Advertisement.fetchVideoAd(e.videoType,function(i,r,o){a.default.d(0,0,"masonc, fetchVideoAd success, retCode="+i+", msg="+r+", handle="+o),0==i&&o?(o.setEventCallack(function(e,t){},function(t,n){e.onCloseCallback&&e.onCloseCallback({isEnded:!0})},function(t,n){e.onCloseCallback&&e.onCloseCallback({isEnded:!1})},function(e,t){}),e.onLoadCallback&&e.onLoadCallback(),o.jump(),t()):(e.onErrorCallback&&e.onErrorCallback(),n(r))})})}},{key:"load",value:function(){a.default.d(0,0,"RewardedVideoAd, load, not implement yet")}},{key:"onClose",value:function(e){this.onCloseCallback=e}},{key:"offClose",value:function(e){this.onCloseCallback=void 0}},{key:"onLoad",value:function(e){this.onLoadCallback=e}},{key:"offLoad",value:function(e){this.onLoadCallback=void 0}},{key:"onError",value:function(e){this.onErrorCallback=e}},{key:"offError",value:function(e){this.onErrorCallback=void 0}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=(i=o)&&i.__esModule?i:{default:i};var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t}return r(e,[{key:"postMessage",value:function(e){a.default.d(0,0,"OpenDataContext: postMessage, message="+JSON.stringify(e)),wx.postMessage(e)}}]),e}();t.default=u},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.OpenSettingButton=t.AuthSetting=void 0;var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=(i=o)&&i.__esModule?i:{default:i};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.AuthSetting=function e(t,n){u(this,e),this.key=t,this.value=n},t.OpenSettingButton=function(){function e(t,n,i){u(this,e),this.text=t,this.image=n,this.style=i}return r(e,[{key:"show",value:function(){a.default.d(0,0,"OpenSettingButton: show failed, not implement yet")}},{key:"hide",value:function(){a.default.d(0,0,"OpenSettingButton: hide failed, not implement yet")}},{key:"onTap",value:function(e){a.default.d(0,0,"OpenSettingButton: onTap failed, not implement yet")}},{key:"offTap",value:function(e){a.default.d(0,0,"OpenSettingButton: offTap failed, not implement yet")}},{key:"destroy",value:function(){a.default.d(0,0,"OpenSettingButton: destroy failed, not implement yet")}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoButton=t.UserInfo=void 0;var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=(i=o)&&i.__esModule?i:{default:i};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.UserInfo=function e(t,n,i){u(this,e),this.language=t,this.nickName=n,this.avatarUrl=i},t.UserInfoButton=function(){function e(t,n,i){u(this,e),this.text=t,this.image=n,this.style=i}return r(e,[{key:"show",value:function(){a.default.d(0,0,"UserInfoButton: show failed, not implement yet")}},{key:"hide",value:function(){a.default.d(0,0,"UserInfoButton: hide failed, not implement yet")}},{key:"onTap",value:function(e){a.default.d(0,0,"UserInfoButton: onTap failed, not implement yet")}},{key:"offTap",value:function(e){a.default.d(0,0,"UserInfoButton: offTap failed, not implement yet")}},{key:"destroy",value:function(){a.default.d(0,0,"UserInfoButton: destroy failed, not implement yet")}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.GameClubButton=t.UserGameData=t.KVData=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.removeUserStorage=function(e,t,n,i,r,o){a.default.d(0,0,"removeUserStorage failed, not implement yet")},t.setUserStorage=function(e,t,n,i,r,o){a.default.d(0,0,"setUserStorage failed, not implement yet")};var r,o=n(0),a=(r=o)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.KVData=function e(t,n){u(this,e),this.key=t,this.value=n},t.UserGameData=function e(t,n,i,r){u(this,e),this.avatarUrl=t,this.nickname=n,this.openid=i,this.KVDataList=r};t.GameClubButton=function(){function e(t,n,i,r){u(this,e),this.left=t,this.top=n,this.width=i,this.height=r}return i(e,[{key:"show",value:function(){a.default.d(0,0,"GameClubButton: show failed, not implement yet")}},{key:"hide",value:function(){a.default.d(0,0,"GameClubButton: hide failed, not implement yet")}},{key:"destroy",value:function(){a.default.d(0,0,"GameClubButton: destroy failed, not implement yet")}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"getShareInfo",value:function(e){}},{key:"hideShareMenu",value:function(e){e&&(e.success&&e.success(),e.complete&&e.complete())}},{key:"onShareAppMessage",value:function(e){this.shareCallback=e}},{key:"offShareAppMessage",value:function(e){this.shareCallback=void 0}},{key:"showShareMenu",value:function(e){e&&(e.success&&e.success(),e.complete&&e.complete())}},{key:"shareAppMessage",value:function(e){var t=void 0,n=void 0;if(e&&(e.title&&(t=e.title),e.imageUrl&&(n=e.imageUrl)),t&&n){var i={summary:t,picUrl:n,extendInfo:e.query,localPicPath:""};BK.QQ.share(i,function(t,n,i){BK.Script.log(1,1,"retCode:"+t+" shareDest:"+n+" isFirstShare:"+i);var r={errMsg:"shareAppMessage:ok",shareTickets:[1]};0===t?(0===n?(BK.Script.log(1,1,"成功分享至QQ"),r.shareTickets.push(1)):1===n?BK.Script.log(1,1,"成功分享至空间"):2===n?BK.Script.log(1,1,"成功分享至微信"):3===n&&BK.Script.log(1,1,"成功分享至朋友圈"),e&&e.success&&e.success(r)):1===t?(BK.Script.log(1,1,"分享失败"+t),e&&e.fail&&e.fail(r)):(BK.Script.log(1,1,"分享失败，用户取消分享："+t),e&&e.fail&&e.fail(r)),e&&e.complete&&e.complete(r)})}else{var r={errMsg:"shareAppMessage:ok",shareTickets:[1]};e&&e.fail&&e.fail(r),e&&e.complete&&e.complete(r)}}},{key:"updateShareMenu",value:function(e){e&&(e.success&&e.success(),e.complete&&e.complete())}}]),e}();t.default=r},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.code2accessToken=function(){BK.Script.log(0,0,"code2accessToken failed: not implement yet")};var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"checkSession",value:function(e){return BK.Script.log(0,0,"checkSession not implement yet"),!0}},{key:"login",value:function(e){e&&BK.QQ.fetchOpenKey(function(t,n,i){if(0==t&&i&&i.openKey){if(e.success){var r={code:"011tWTqk2qizXE0yQsrk2Vqzqk2tWTqq",openid:GameStatusInfo.openId,openkey:i.openKey};e.success(r)}}else BK.Script.log(0,0,"fetchOpenKey failed: errCode="+t),e.fail&&e.fail();e.complete&&e.complete()})}}]),e}();t.default=r},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onBtnClick=function(){},this.onTextChange=function(){}}return i(e,[{key:"showKeyboard",value:function(e){var t=this;BK.Editor.showKeyBoard(function(e){var n={};n.value=e,t.onBtnClick(n)},function(e){var n={};n.value=e,t.onTextChange(n)})}},{key:"hideKeyboard",value:function(e){BK.Editor.hideKeyBoard()}},{key:"onKeyboardInput",value:function(e){this.onTextChange=e}},{key:"onKeyboardConfirm",value:function(e){this.onBtnClick=e}},{key:"onKeyboardComplete",value:function(e){this.onBtnClick=e}},{key:"offKeyboardInput",value:function(e){this.onTextChange=function(){}}},{key:"offKeyboardConfirm",value:function(e){this.onBtnClick=function(){}}},{key:"offKeyboardComplete",value:function(e){this.onBtnClick=function(){}}}]),e}();t.default=r},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0);(i=o)&&i.__esModule,n(2);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=new Map,l=0,c=0,s=function(){function e(t){a(this,e);var n=t.url;this.socket=new BK.WebSocket(n),this.id=++c;var i=this;this.WEB_SOCKET_EVENT_MAP=[],this.socket.onOpen=function(e){i.onEvent(d.SOCK_EVENT_OPEN,e)},this.socket.onError=function(e){i.onEvent(d.SOCK_EVENT_ERROR,e)},this.socket.onClose=function(e){i.onEvent(d.SOCK_EVENT_CLOSE,e)},this.socket.onMessage=function(e,t){var n="";n=t.isBinary?i.bricksBufferToArrayBuffer(t.data):t.data.readAsString(),i.onEvent(d.SOCK_EVENT_MESSAGE,i.socket,{data:n})}}return r(e,[{key:"bricksBufferToArrayBuffer",value:function(e){for(var t=new ArrayBuffer(e.bufferLength()),n=new Uint8Array(t),i=0;i<e.bufferLength();)n[i++]=e.readUint8Buffer();return t}},{key:"onOpen",value:function(e){this.publishEvent(d.SOCK_EVENT_OPEN,e)}},{key:"onClose",value:function(e){this.publishEvent(d.SOCK_EVENT_CLOSE,e)}},{key:"onMessage",value:function(e){this.publishEvent(d.SOCK_EVENT_MESSAGE,e)}},{key:"onError",value:function(e){this.publishEvent(d.SOCK_EVENT_ERROR,e)}},{key:"arrayBufferToBricksBuffer",value:function(e){for(var t=new BK.Buffer(e.byteLength),n=new Uint8Array(e),i=0;i<e.byteLength;)t.writeUint8Buffer(n[i++]);return t}},{key:"send",value:function(e){var t=e,n=e.success,i=(e.fail,e.complete);return e&&(e.data instanceof ArrayBuffer?t=this.arrayBufferToBricksBuffer(e.data):e.data&&(t=e.data)),n&&n(this),i&&i(this),this.socket.send(t)}},{key:"close",value:function(e){var t=e.success,n=(e.fail,e.complete);return t&&t(this),n&&n(this),this.socket.close()}},{key:"connect",value:function(){this.socket.connect()}},{key:"onEvent",value:function(e,t,n){var i=this.WEB_SOCKET_EVENT_MAP[e];"function"==typeof i&&i(n)}},{key:"publishEvent",value:function(e,t){this.WEB_SOCKET_EVENT_MAP[e]=t}}]),e}(),f=[],d=function(){function e(){a(this,e)}return r(e,null,[{key:"onEvent",value:function(e,t,n){var i=f[e];"function"==typeof i&&i(t,n)}},{key:"publishEvent",value:function(e,t){f[e]=t}},{key:"newConnection",value:function(e){var t=e.success?e.success:function(){},n=e.fail?e.fail:function(){},i=e.complete?e.complete:function(){},r=null,o=e.url;if(!(l>=5)){u||(u=new Map);return(r=new s(e))?(u.set(o,r),l++,t()):n("Open fail for null"),i(),r}n("Reach max request num")}},{key:"closeSocket",value:function(e){var t=e.success?e.success:function(){},n=e.fail?e.fail:function(){},i=e.complete?e.complete:function(){};u||n("No request"),u.forEach(function(e,t){e instanceof s&&e.close()}),t(),i()}},{key:"sendMessage",value:function(e){var t=e.success?e.success:function(){},n=e.fail?e.fail:function(){},i=e.complete?e.complete:function(){};u||n("No request"),u.forEach(function(t,n){t instanceof s&&t.send(e.data)}),t(),i()}}]),e}();t.default=d,d.SOCK_EVENT_OPEN="OPEN",d.SOCK_EVENT_ERROR="ERROR",d.SOCK_EVENT_MESSAGE="MESSAGE",d.SOCK_EVENT_CLOSE="CLOSE"},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3));var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t.url,this.data=t.data||"",this.header=t.header||{},this.dataType=t.dataType||t.responseType||"json",this.success=t.success||function(){},this.fail=t.fail||function(){},this.complete=t.complete||function(){},this.method=t.method||"get",this.object=t}return i(e,[{key:"request",value:function(){var e=new BK.HttpUtil(this.url);console.log("bk request:",this.object);var t="get";switch(this.method){case"POST":t="post",console.log("this.data",this.data),e.setHttpPostData(this.data)}if(this.header)for(var n in this.header)e.setHttpHeader(n,this.header[n]);for(var i in e.setHttpMethod(t),this.header)e.setHttpHeader(i,this.header[i]);var r=this;e.requestAsync(function(e,n){var i=e.bufferLength();if(console.log("bk Http request : "+n+" # "+r.dataType),200!=n)console.log("request fail:",n,t,i,e.readStringBuffer(),r.object),r.fail({errMsg:" ",statusCode:n,header:{}});else{var o=void 0;if(o="arraybuffer"!=r.dataType?e.readAsString(!0):r.bricksBufferToArrayBuffer(e),"json"==r.dataType)try{o=JSON.parse(o)}catch(e){o=o}r.success({data:o,statusCode:n,header:{}}),r.complete&&r.complete({data:o,statusCode:n,header:{}})}})}},{key:"ab2str",value:function(e){return String.fromCharCode.apply(null,new Uint16Array(e))}},{key:"bricksBufferToArrayBuffer",value:function(e){for(var t=new ArrayBuffer(e.bufferLength()),n=new Uint8Array(t),i=0;i<e.bufferLength();)n[i++]=e.readUint8Buffer();return t}},{key:"uploadFile",value:function(){var e=r.wrapSandBoxPath(this.object.filePath||""),t=this.object.formData||{},n=this.header||{};n["Content-Type"]="multipart/form-data; boundary=a401103119";var i="";for(var o in t)i+="--",i+="a401103119",i+="\r\n",i+='Content-Disposition: form-data; name="',i+=o,i+='"\r\n\r\n',i+=t[o],i+="\r\n";var a=BK.FileUtil.readFile(e);i+="--",i+="a401103119",i+="\r\n",i+='Content-Disposition: form-data; name="',i+=o,i+='"; filename="',i+=this.object.name,i+='"\r\n',i+="Content-Type: application/octet-stream\r\n\r\n";var u="";u+="\r\n",u+="--",u+="a401103119",u+="--\r\n";var l=new BK.Buffer(a.bufferLength()+i.length+u.length+3+3);l.writeStringBuffer(i),l.writeBuffer(a),l.writeStringBuffer(u);var c=new BK.HttpUtil(this.url);for(var s in c.setHttpMethod("post"),n)c.setHttpHeader(s,n[s]);var f=this;c.setBodyCompatible(!1),c.setHttpRawBody(l),c.requestAsync(function(e,t){var n=e.bufferLength();200!=t?(BK.Script.log(1,0,"requestAsync fail: "+t),f.fail({data:"",statusCode:t,header:{}})):(BK.Script.log(1,0,"requestAsync success: "+f.success),f.success({data:e.readBuffer(n),statusCode:t,header:{}}))})}},{key:"downloadFile",value:function(){var e=this.object.filePath||r.extractFilePathFromUrl(this.url);this.relpath=e;var t=r.wrapSandBoxPath(e),n=r.extractFileNameFromUrl(this.url);BK.Script.log(1,0,"downloadFile "+t+n);var i=new BK.HttpUtil(this.url);for(var o in this.header)i.setHttpHeader(o,header[o]);i.setHttpMethod("get");var a=this;i.requestAsync(function(e,i){e.bufferLength();if(BK.Script.log(1,0,BK.FileUtil.isFileExist(t+n)),200!=i)BK.Script.log(1,0,"requestAsync fail: "+i),a.fail({data:"",statusCode:i,header:{}});else{var r=-1!=t.indexOf(n)?t:t+n;BK.FileUtil.writeBufferToFile(r,e)||BK.Script.log(1,0,"write download file failed");var o=-1!=a.relpath.indexOf(n)?a.relpath:a.relpath+n;BK.Script.log(1,0,"write download file "+o+" "+BK.FileUtil.isFileExist(r)),a.success({tempFilePath:o,statusCode:i,header:{}})}})}}]),e}();t.default=o},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.Stats=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(0)),o=l(n(1)),a=n(3),u=n(2);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(){c(this,e)}return i(e,[{key:"readFile",value:function(e){r.default.d(0,0,"readFile, object="+JSON.stringify(e));var t=this;(0,u.setTimeout)(function(){if(e){var n=e.encoding;if("string"==typeof e.filePath){var i=(0,a.wrapLocalUrl)(e.filePath);if(BK.FileUtil.isFileExist(i)||(i=(0,a.wrapSandBoxPath)(e.filePath)),BK.FileUtil.isFileExist(i)){var o=BK.FileUtil.readFile(i),u=void 0,l={data:u=!n||"utf-8"!==n&&"utf8"!==n&&"ascii"!==n&&"latin1"!==n?t.bricksBufferToArrayBuffer(o):o.readAsString()};r.default.d(0,0,"readFile, success, filePath="+e.filePath+", bkFilePath="+i+", data="+u),e.success&&e.success(l)}else{r.default.d(0,0,"readFile failed, file not exist, filePath="+e.filePath+", bkFilePath="+i);l={errMsg:"file not exist"};e.fail&&e.fail(l)}}else{r.default.d(0,0,"readFile failed, invalid filePath, filePath="+e.filePath);l={errMsg:"invalid filePath"};e.fail&&e.fail(l)}e.complete&&e.complete()}else r.default.d(0,0,"readFile failed, no object")},0)}},{key:"readFileSync",value:function(e,t){if(r.default.d(0,0,"readFileSync, filePath="+e+", encoding="+t),"string"==typeof e){var n=(0,a.wrapLocalUrl)(e);if(BK.FileUtil.isFileExist(n)||(n=(0,a.wrapSandBoxPath)(e)),BK.FileUtil.isFileExist(n)){var i=BK.FileUtil.readFile(n);return"utf-8"===t||"utf8"===t||"ascii"===t||"latin1"===t?(r.default.d(0,0,"readFileSync success, string, bkFilePath="+n),i.readAsString()):(r.default.d(0,0,"readFileSync success, ArrayBuffer, bkFilePath="+n),BK.Misc.BKBufferToArrayBuffer(i))}throw new Error("readFileSync:fail, file not exist ${bkFilePath}")}throw new Error("readFileSync:fail, invalid filePath")}},{key:"bricksBufferToArrayBuffer",value:function(e){for(var t=new ArrayBuffer(e.bufferLength()),n=new Uint8Array(t),i=0;i<e.bufferLength();)n[i++]=e.readUint8Buffer();return t}},{key:"writeFile",value:function(e){r.default.d(0,0,"writeFile, object="+JSON.stringify(e)),(0,u.setTimeout)(function(){if(e&&e.filePath&&e.data){if("string"==typeof e.filePath){var t=(0,a.wrapSandBoxPath)(e.filePath);if("string"==typeof e.data)BK.FileUtil.writeFile(t,e.data);else{var n=BK.Misc.arrayBufferToBKBuffer(e.data);BK.FileUtil.writeBufferToFile(t,n)}r.default.d(0,0,"writeFile success, filePath="+e.filePath),e.success&&e.success()}else{e.fail&&e.fail({errMsg:"invalid filePath"})}e.complete&&e.complete()}else r.default.d(0,0,"writeFile failed, no object")},0)}},{key:"writeFileSync",value:function(e,t,n){if(r.default.d(0,0,"writeFileSync, filePath="+e),!e||!t)throw new Error("writeFileSync:fail, invalid param");if("string"!=typeof e)throw new Error("writeFileSync:fail, invalid filePath");var i=(0,a.wrapSandBoxPath)(e);if("string"==typeof t)BK.FileUtil.writeFile(i,t);else{var o=BK.Misc.arrayBufferToBKBuffer(t);BK.FileUtil.writeBufferToFile(i,o)}r.default.d(0,0,"writeFileSync success, filePath="+e)}},{key:"access",value:function(e){r.default.d(0,0,"access, object="+JSON.stringify(e)),(0,u.setTimeout)(function(){var t=BK.FileUtil.isFileExist((0,a.wrapLocalUrl)(e.path));if(t||(t=BK.FileUtil.isFileExist((0,a.wrapSandBoxPath)(e.path))),r.default.d(0,0,"access, path="+e.path+", isFileExist="+t),t)e.success&&e.success();else{e.fail&&e.fail({errMsg:"fail no such file or directory"})}e.complete&&e.complete()},0)}},{key:"accessSync",value:function(e){var t=BK.FileUtil.isFileExist((0,a.wrapLocalUrl)(e));if(t||(t=BK.FileUtil.isFileExist((0,a.wrapSandBoxPath)(e))),r.default.d(0,0,"accessSync, path="+e+", isFileExist="+t),!t)throw new Error("no such file or directory")}},{key:"mkdirSync",value:function(e,t){if(r.default.d(0,0,"mkdirSync, dirPath="+e),"string"!=typeof e)throw new Error("mkdirSync:failed, invalid dirPath");var n=(0,a.wrapSandBoxPath)(e);if(BK.FileUtil.isFileExist(n))throw new Error("mkdirSync:failed, file already exist ${bkFilePath}");if(!BK.FileUtil.makeDir(n))throw new Error("mkdir failed")}},{key:"mkdir",value:function(e){r.default.d(0,0,"mkdir, object="+JSON.stringify(e)),(0,u.setTimeout)(function(){if(e){if("string"==typeof e.dirPath)if(BK.FileUtil.makeDir((0,a.wrapSandBoxPath)(e.dirPath)))e.success&&e.success();else{var t={errMsg:"mkdir failed"};e.fail&&e.fail(t)}else{t={errMsg:"invalid dirPath"};e.fail&&e.fail(t)}e.complete&&e.complete()}else r.default.d(0,0,"mkdir failed, no object")},0)}},{key:"removeSavedFile",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.filePath){var t=(0,a.wrapSandBoxPath)(e.filePath);if(BK.FileUtil.isFileExist(t))if(BK.FileUtil.deleteFile(t))e.success&&e.success(n);else{var n={errMsg:"delete failed"};e.fail&&e.fail(n)}else{n={errMsg:"file not exist"};e.fail&&e.fail(n)}}else{n={errMsg:"invalid filePath"};e.fail&&e.fail(n)}e.complete&&e.complete()}else r.default.d(0,0,"removeSavedFile failed, no object")},0)}},{key:"unlink",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.filePath){var t=(0,a.wrapSandBoxPath)(e.filePath);if(BK.FileUtil.isFileExist(t))if(BK.FileUtil.deleteFile(t))e.success&&e.success();else{var n={errMsg:"fail"};e.fail&&e.fail(n)}else{n={errMsg:"file not exist"};e.fail&&e.fail(n)}}else{n={errMsg:"invalid filePath"};e.fail&&e.fail(n)}e.complete&&e.complete()}else r.default.d(0,0,"unlink failed, no object")},0)}},{key:"unlinkSync",value:function(e){if("string"==typeof e){var t=(0,a.wrapSandBoxPath)(e);if(!BK.FileUtil.isFileExist(t))throw new Error("unlinkSync:fail, file not exist");BK.FileUtil.deleteFile(t)}}},{key:"copyFile",value:function(e){var t=BK.FileUtil.readFile("GameSandBox://"+e.srcPath);BK.FileUtil.writeBufferToFile("GameSandBox://"+e.destPath,t),e.success&&e.success()}},{key:"copyFileSync",value:function(e,t){var n=BK.FileUtil.readFile("GameSandBox://"+object.srcPath);return BK.FileUtil.writeBufferToFile("GameSandBox://"+object.destPath,n)}},{key:"getFileInfo",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.filePath){var t=(0,a.wrapLocalUrl)(e.filePath);if(BK.FileUtil.isFileExist(t)||(t=(0,a.wrapSandBoxPath)(e.filePath)),BK.FileUtil.isFileExist(t)||BK.FileUtil.isFileExist((0,a.wrapSandBoxPath)(e.filePath))){var n=BK.FileUtil.getFileInfo(t)||BK.FileUtil.getFileInfo((0,a.wrapSandBoxPath)(e.filePath));if(n){var i={size:n.size};e.success&&e.success(i)}else{i={errMsg:"getFileInfo failed"};e.fail&&e.fail(i)}}else{i={errMsg:"file not exist"};e.fail&&e.fail(i)}}else{i={errMsg:"invalid filePath"};e.fail&&e.fail(i)}e.complete&&e.complete()}else r.default.d(0,0,"getFileInfo failed, no object")},0)}},{key:"getSavedFileList",value:function(e){}},{key:"rmdir",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.dirPath){var t=(0,a.wrapSandBoxPath)(e.dirPath);if(BK.FileUtil.deleteFile(t))e.success&&e.success(n);else{var n={errMsg:"fail"};e.fail&&e.fail(n)}}else{n={errMsg:"invalid dirPath"};e.fail&&e.fail(n)}e.complete&&e.complete()}else r.default.d(0,0,"rmdir failed, no object")},0)}},{key:"rmdirSync",value:function(e,t){if("string"!=typeof e)throw new Error("rmdirSync:fail, invalid dirPath");var n=(0,a.wrapSandBoxPath)(e);if(!BK.FileUtil.isFileExist(n))throw new Error("rmdirSync:fail, no such file or directory ${dirPath}");if(!BK.FileUtil.deleteFile(n))throw new Error("rmdirSync:fail, ${dirPath}")}},{key:"rename",value:function(e){r.default.d(0,0,"rename not implement yet")}},{key:"renameSync",value:function(e,t){r.default.d(0,0,"renameSync not implement yet")}},{key:"readdir",value:function(e){if(e)if("string"==typeof e.dirPath){var t=void 0;0==e.dirPath.indexOf(o.default.SRC_PRE)||0==e.dirPath.indexOf(o.default.SAND_PRE)?t=e.dirPath:(t=(0,a.wrapSandBoxPath)(e.dirPath),BK.FileUtil.isFileExist(t)||(t=(0,a.wrapLocalUrl)(e.dirPath))),r.default.d(0,0,"readdir dirPath="+e.dirPath+", bkFilePath="+t),BK.FileUtil.isFileExist(t)?BK.FileUtil.getFileList({path:t,needDir:!0},function(t,n){if(0==t){var i=[];if(n&&n.files&&n.files.length>0)for(var r=0;r<n.files.length;r++){var o=n.files[r];i[r]=o.substr(o.lastIndexOf("/")+1)}e.success&&e.success({files:i})}else e.fail&&e.fail({errMsg:"get fileList failed, code:${code}"});e.complete&&e.complete()}):r.default.d(0,0,"readdir bkFilePath="+t+", not exist")}else e.fail&&e.fail({errMsg:"invalid dirPath"}),e.complete&&e.complete();else r.default.d(0,0,"readdir failed, no object")}},{key:"readdirSync",value:function(e){if("string"==typeof e){var t=void 0;0==e.indexOf(o.default.SRC_PRE)||0==e.indexOf(o.default.SAND_PRE)?t=e:(t=(0,a.wrapSandBoxPath)(e),BK.FileUtil.isFileExist(t)||(t=(0,a.wrapLocalUrl)(e))),r.default.d(0,0,"readdirSync dirPath="+e+", bkFilePath="+t);var n=[];return BK.FileUtil.isFileExist(t)?BK.FileUtil.getFileList({path:t,needDir:!0},function(e,i){if(r.default.d(0,0,"readdirSync bkFilePath="+t+", code="+e),0==e&&i&&i.files&&i.files.length>0)for(var o=0;o<i.files.length;o++){var a=i.files[o];n[o]=a.substr(a.lastIndexOf("/")+1)}}):r.default.d(0,0,"readdirSync bkFilePath="+t+", not exist"),n}throw new Error("readdirSync failed, invalid dirPath")}},{key:"saveFile",value:function(e){r.default.d(0,0,"saveFile not implement yet")}},{key:"saveFileSync",value:function(e,t){r.default.d(0,0,"saveFileSync not implement yet")}},{key:"stat",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.path){var t=(0,a.wrapLocalUrl)(e.path);if(BK.FileUtil.isFileExist(t)||(t=(0,a.wrapSandBoxPath)(e.path)),BK.FileUtil.isFileExist(t)){var n=BK.FileUtil.getFileInfo(t);if(n){var i={stat:new f(e.path,0,n.size,n.atime,n.mtime)};e.success&&e.success(i)}else{i={errMsg:"get file info failed"};e.fail&&e.fail(i)}}else{i={errMsg:"file not exist"};e.fail&&e.fail(i)}}else{i={errMsg:"no path"};e.fail&&e.fail(i)}e.complete&&e.complete()}else r.default.d(0,0,"stat failed, no param")},0)}},{key:"statSync",value:function(e){if("string"==typeof e){var t=(0,a.wrapLocalUrl)(e);if(BK.FileUtil.isFileExist(t)||(t=(0,a.wrapSandBoxPath)(e)),BK.FileUtil.isFileExist(t)){var n=BK.FileUtil.getFileInfo(t);if(n)return new f(e,0,n.size,n.atime,n.mtime)}else r.default.d(0,0,"statSync failed, file not exist, file:"+t)}}},{key:"unzip",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.zipFilePath&&"string"==typeof e.targetPath)if(BK.FileUtil.unzip(e.zipFilePath,e.targetPath))e.success&&e.success();else{var t={errMsg:"unzip failed"};e.fail&&e.fail(t)}else{t={errMsg:"invalid path"};e.fail&&e.fail(t)}e.complete&&e.complete()}else r.default.d(0,0,"unzip failed, no object")},0)}}]),e}();t.default=s;var f=t.Stats=function(){function e(t,n,i,r,o){c(this,e),this.path=t,this.mode=n,this.size=i,this.lastAccessedTime=r,this.lastModifiedTime=o,this.isDir=BK.FileUtil.isDirectory(t)}return i(e,[{key:"isFile",value:function(){return!this.isDir}},{key:"isDirectory",value:function(){return this.isDir}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(u(n(1)),u(n(0))),o=n(3),a=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var l=new WeakMap,c=new WeakMap,s=new WeakMap,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._event={},c.set(this,""),s.set(this,!1)}return i(e,[{key:"removeEventListener",value:function(e,t){this._event[e]||(this._event[e]=[]);var n=this._event[e].indexOf(t);this._event[e].splice(n,1)}},{key:"addEventListener",value:function(e,t,n){this._event[e]||(this._event[e]=[]),this._event[e].push(t),n&&n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n&&n.once,n&&n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._event[e.type];if(void 0!==t)for(var n=0;n<t.length;n++)t[n]&&t[n](e)}},{key:"play",value:function(){var e=c.get(this),t=s.get(this);if(r.default.d(0,0,"InnerAudioContext play: "+e+", loop="+t),void 0!==e){var n=this;if(void 0===l.get(this)){var i=(0,o.getAudioPath)(e);if((0,o.isRemoteUrl)(e)){if(!BK.FileUtil.isFileExist(i)){var a=i;r.default.d(0,0,"InnerAudioContext, not downloaded:"+e+", path:"+a);var u=new BK.HttpUtil(e);return u.setHttpMethod("get"),void u.requestAsync(function(e,o){(r.default.d(0,0,"InnerAudioContext, download audio over"),200==o)?BK.FileUtil.writeBufferToFile(a,e)?(l.set(n,n.createContext(i,t)),void 0!==l.get(n)&&(l.get(n).startMusic(function(){n.onEndedCallback&&n.onEndedCallback()}),n.onPlayCallback&&n.onPlayCallback())):r.default.d(0,0,"InnerAudioContext, save audio failed"):r.default.d(0,0,"InnerAudioContext, download audio failed:"+o+", url="+url)})}r.default.d(0,0,"InnerAudioContext, downloaded:"+e),l.set(this,this.createContext(i,t))}else l.set(this,this.createContext(i,t))}void 0!==l.get(this)&&(l.get(this).isParsed?l.get(this).resumeMusic():(l.get(this).startMusic(function(){n.onEndedCallback&&n.onEndedCallback()}),n.onPlayCallback&&n.onPlayCallback()))}else r.default.d(0,0,"no src value")}},{key:"createContext",value:function(e,t){return new BK.Audio(t?0:1,e,t?-1:1)}},{key:"pause",value:function(){if(r.default.d(0,0,"InnerAudioContext pause: "+c.get(this)),void 0!==l.get(this)){l.get(this).pauseMusic(),l.get(this).isParsed=!0,this.onPauseCallback&&this.onPauseCallback()}}},{key:"stop",value:function(){if(r.default.d(0,0,"InnerAudioContext stop: "+c.get(this)),void 0!==l.get(this)){l.get(this).stopMusic(),this.onStopCallback&&this.onStopCallback()}}},{key:"seek",value:function(e){var t=l.get(this);t&&t.seek?(t.seek(1e3*e),this.dispatchEvent({target:this,type:"seeked"})):r.default.d(1,0,"InnerAudioContext seek not implement yet")}},{key:"onCanplay",value:function(e){this.onCanplayCallback=e}},{key:"offCanplay",value:function(e){this.onCanplayCallback=void 0}},{key:"onPlay",value:function(e){this.onPlayCallback=e}},{key:"offPlay",value:function(e){this.onPlayCallback=void 0}},{key:"onPause",value:function(e){this.onPauseCallback=e}},{key:"offPause",value:function(e){this.onPauseCallback=void 0}},{key:"onStop",value:function(e){this.onStopCallback=e}},{key:"offStop",value:function(e){this.onStopCallback=void 0}},{key:"onEnded",value:function(e){this.onEndedCallback=e}},{key:"offEnded",value:function(e){this.onEndedCallback=void 0}},{key:"onError",value:function(e){this.onErrorCallback=e}},{key:"offError",value:function(e){this.onErrorCallback=void 0}},{key:"onTimeUpdate",value:function(e){this.onTimeUpdateCallback=e}},{key:"offTimeUpdate",value:function(e){this.onTimeUpdateCallback=void 0}},{key:"onWaiting",value:function(e){this.onWaitingCallback=e}},{key:"offWaiting",value:function(e){this.onWaitingCallback=void 0}},{key:"onSeeking",value:function(e){this.addEventListener("seeking",e),this.onSeekingCallback=e}},{key:"offSeeking",value:function(e){this.removeEventListener("seeking",e),this.onSeekingCallback=void 0}},{key:"onSeeked",value:function(e){this.addEventListener("seeked",e),this.onSeekedCallback=e}},{key:"offSeeked",value:function(e){this.removeEventListener("seeked",e),this.onSeekedCallback=void 0}},{key:"src",get:function(){return c.get(this)},set:function(e){c.set(this,e);var t=this;(0,a.setTimeout)(function(){r.default.d(0,0,"InnerAudioContext onCanplayCallback"),t.onCanplayCallback&&t.onCanplayCallback()},0)}},{key:"loop",get:function(){return s.get(this)},set:function(e){s.set(this,e)}}]),e}();t.default=f},function(e,t,n){;!function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),i=0;i<e.length;i++)n[e.charCodeAt(i)]=i;t.encode=function(t){var n,i=new Uint8Array(t),r=i.length,o="";for(n=0;n<r;n+=3)o+=e[i[n]>>2],o+=e[(3&i[n])<<4|i[n+1]>>4],o+=e[(15&i[n+1])<<2|i[n+2]>>6],o+=e[63&i[n+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,i,r,o,a,u=.75*e.length,l=e.length,c=0;"="===e[e.length-1]&&(u--,"="===e[e.length-2]&&u--);var s=new ArrayBuffer(u),f=new Uint8Array(s);for(t=0;t<l;t+=4)i=n[e.charCodeAt(t)],r=n[e.charCodeAt(t+1)],o=n[e.charCodeAt(t+2)],a=n[e.charCodeAt(t+3)],f[c++]=i<<2|r>>4,f[c++]=(15&r)<<4|o>>2,f[c++]=(3&o)<<6|63&a;return s}}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(0)),o=(l(n(1)),n(3)),a=n(2),u=n(25);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=0,this.height=0,this.tmpSrc="",this._event={},this.bkLocalPath=""}return i(e,[{key:"removeEventListener",value:function(e,t){this._event[e]||(this._event[e]=[]);var n=this._event[e].indexOf(t);this._event[e].splice(n,1)}},{key:"addEventListener",value:function(e,t,n){this._event[e]||(this._event[e]=[]),this._event[e].push(t),n&&n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n&&n.once,n&&n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._event[e.type];if(void 0!==t)for(var n=0;n<t.length;n++)t[n]&&t[n](e)}},{key:"handleImgUrl",value:function(){var e=this.tmpSrc,t=this.bkLocalPath;r.default.d(0,0,"image, handleImgUrl, url="+e+", bkLocalPath="+t),"string"==typeof e?(0,o.isRemoteUrl)(e)?BK.FileUtil.isFileExist(t)?(r.default.d(0,0,"image, handleImgUrl, downloaded, localPath="+t),this.createImgObj(t)):(r.default.d(0,0,"image, handleImgUrl, load remote url, url="+e),this.loadImg()):this.createImgObj(t):this.dispatchEvent({type:"error"})}},{key:"handleB64data",value:function(e){var t=BK.Misc.arrayBufferToBKBuffer(e);this.createImgObj(t)}},{key:"loadImg",value:function(){var e=this,t=e.tmpSrc,n=e.bkLocalPath;r.default.d(0,0,"image, loadImg, load remote url, url="+t+", path="+n);var i=new BK.HttpUtil(t);i.setHttpMethod("get"),i.requestAsync(function(i,o){200==o?BK.FileUtil.writeBufferToFile(n,i)?e.createImgObj(n):(r.default.d(0,0,"ImageAdapter, save img failed"),e.dispatchEvent({type:"error"})):(r.default.d(0,0,"ImageAdapter, loadImg failed:"+o+", url="+t),e.dispatchEvent({type:"error"}))})}},{key:"createImgObj",value:function(e){var t=BK.Image.loadImage(e);r.default.d(0,0,"image, createImgObj, img="+t+", path="+e);var n=this;void 0!==t?(this.loaded=!0,this._bknode=t,this.__nativeObj=t,this.naturalWidth=t.width,this.naturalHeight=t.height,this.width=t.width,this.height=t.height,this.type="arraybuffer",this.source=this.src,0===this.width&&0===this.height&&(this.width=t.width,this.height=t.height),r.default.d(0,0,"image, createImgObj, dispatchEvent load with obj, path="+e),(0,a.setTimeout)(function(){n.dispatchEvent({target:n,type:"load"})},0)):(r.default.d(0,0,"image, createImgObj, dispatchEvent error, path="+e),(0,a.setTimeout)(function(){n.dispatchEvent({type:"error",target:n})},0))}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"src",get:function(){return this.bkLocalPath},set:function(e){if(e.includes(":image")){var t=(0,u.decode)(e.substr(e.lastIndexOf("base64")+7));console.log("base64 image loaded "),this.handleB64data(t)}else{var n=(0,o.getImgPath)(e);r.default.d(0,0,"image, src="+e),n!==this.bkLocalPath&&(this.bkLocalPath=n,this.tmpSrc=e,this.handleImgUrl())}}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"source",get:function(){return this._source},set:function(e){this._source=e}},{key:"onload",set:function(e){if(e){this.addEventListener("load",e,{once:!0});this.loaded&&e({once:!0})}}},{key:"onerror",set:function(e){this.addEventListener("error",e,{once:!0})}}]),e}();t.default=c},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=Math.PI,r=2*i,o=i/180,a=[];function u(e,t,n,i,r,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0);return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=r,this.ty=o,this}u.release=function(e){e&&a.push(e)},u.create=function(){var e=a.pop();return e||(e=new u),e},u.prototype.clone=function(){return new u(this.a,this.b,this.c,this.d,this.tx,this.ty)},u.prototype.concat=function(e){var t=this.a*e.a,n=0,i=0,r=this.d*e.d,o=this.tx*e.a+e.tx,a=this.ty*e.d+e.ty;0===this.b&&0===this.c&&0===e.b&&0===e.c||(t+=this.b*e.c,r+=this.c*e.b,n+=this.a*e.b+this.b*e.d,i+=this.c*e.a+this.d*e.c,o+=this.ty*e.c,a+=this.tx*e.b),this.a=t,this.b=n,this.c=i,this.d=r,this.tx=o,this.ty=a},u.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},u.prototype.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},u.prototype.invert=function(){this.$invertInto(this)},u.prototype.$invertInto=function(e){var t=this.a,n=this.b,i=this.c,r=this.d,o=this.tx,a=this.ty;if(0==n&&0==i)return e.b=e.c=0,void(0==t||0==r?e.a=e.d=e.tx=e.ty=0:(t=e.a=1/t,r=e.d=1/r,e.tx=-t*o,e.ty=-r*a));var u=t*r-n*i;if(0!=u){u=1/u;var l=e.a=r*u;n=e.b=-n*u,i=e.c=-i*u,r=e.d=t*u,e.tx=-(l*o+i*a),e.ty=-(n*o+r*a)}else e.identity()},u.prototype.rotate=function(e){if(0!==(e=+e)){e/=o;var t=egret.NumberUtils.cos(e),n=egret.NumberUtils.sin(e),i=this.a,r=this.b,a=this.c,u=this.d,l=this.tx,c=this.ty;this.a=i*t-r*n,this.b=i*n+r*t,this.c=a*t-u*n,this.d=a*n+u*t,this.tx=l*t-c*n,this.ty=l*n+c*t}},u.prototype.scale=function(e,t){1!==e&&(this.a*=e,this.c*=e,this.tx*=e),1!==t&&(this.b*=t,this.d*=t,this.ty*=t)},u.prototype.setTo=function(e,t,n,i,r,o){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=r,this.ty=o,this},u.prototype.transformPoint=function(e,t,n){var i=this.a*e+this.c*t+this.tx,r=this.b*e+this.d*t+this.ty;return n?(n.setTo(i,r),n):new egret.Point(i,r)},u.prototype.translate=function(e,t){this.tx+=e,this.ty+=t},u.prototype.equals=function(e){return this.a==e.a&&this.b==e.b&&this.c==e.c&&this.d==e.d&&this.tx==e.tx&&this.ty==e.ty},u.prototype.prepend=function(e,t,n,i,r,o){var a=this.tx;if(1!=e||0!=t||0!=n||1!=i){var u=this.a,l=this.c;this.a=u*e+this.b*n,this.b=u*t+this.b*i,this.c=l*e+this.d*n,this.d=l*t+this.d*i}return this.tx=a*e+this.ty*n+r,this.ty=a*t+this.ty*i+o,this},u.prototype.append=function(e,t,n,i,r,o){var a=this.a,u=this.b,l=this.c,c=this.d;return 1==e&&0==t&&0==n&&1==i||(this.a=e*a+t*l,this.b=e*u+t*c,this.c=n*a+i*l,this.d=n*u+i*c),this.tx=r*a+o*l+this.tx,this.ty=r*u+o*c+this.ty,this},u.prototype.deltaTransformPoint=function(e){var t=this.a*e.x+this.c*e.y,n=this.b*e.x+this.d*e.y;return new egret.Point(t,n)},u.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},u.prototype.createBox=function(e,t,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0);if(0!==n){n/=o;var a=egret.NumberUtils.cos(n),u=egret.NumberUtils.sin(n);this.a=a*e,this.b=u*t,this.c=-u*e,this.d=a*t}else this.a=e,this.b=0,this.c=0,this.d=t;this.tx=i,this.ty=r},u.prototype.createGradientBox=function(e,t,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),this.createBox(e/1638.4,t/1638.4,n,i+e/2,r+t/2)},u.prototype.$transformBounds=function(e){var t=this.a,n=this.b,i=this.c,r=this.d,o=this.tx,a=this.ty,u=e.x,l=e.y,c=u+e.width,s=l+e.height,f=t*u+i*l+o,d=n*u+r*l+a,h=t*c+i*l+o,p=n*c+r*l+a,g=t*c+i*s+o,m=n*c+r*s+a,v=t*u+i*s+o,E=n*u+r*s+a,y=0;f>h&&(y=f,f=h,h=y),g>v&&(y=g,g=v,v=y),e.x=Math.floor(f<g?f:g),e.width=Math.ceil((h>v?h:v)-e.x),d>p&&(y=d,d=p,p=y),m>E&&(y=m,m=E,E=y),e.y=Math.floor(d<m?d:m),e.height=Math.ceil((p>E?p:E)-e.y)},u.prototype.getDeterminant=function(){return this.a*this.d-this.b*this.c},u.prototype.$getScaleX=function(){var e=this;if(0==e.b)return e.a;var t=Math.sqrt(e.a*e.a+e.b*e.b);return this.getDeterminant()<0?-t:t},u.prototype.$getScaleY=function(){var e=this;if(0==e.c)return e.d;var t=Math.sqrt(e.c*e.c+e.d*e.d);return this.getDeterminant()<0?-t:t},u.prototype.$getSkewX=function(){return this.d<0?Math.atan2(this.d,this.c)+i/2:Math.atan2(this.d,this.c)-i/2},u.prototype.$getSkewY=function(){return this.a<0?Math.atan2(this.b,this.a)-i:Math.atan2(this.b,this.a)},u.prototype.$updateScaleAndRotation=function(e,t,n,i){if(!(0!=n&&n!=r||0!=i&&i!=r))return this.a=e,this.b=this.c=0,void(this.d=t);n/=o,i/=o;var a=egret.NumberUtils.cos(n),u=egret.NumberUtils.sin(n);n==i?(this.a=a*e,this.b=u*e):(this.a=egret.NumberUtils.cos(i)*e,this.b=egret.NumberUtils.sin(i)*e),this.c=-u*t,this.d=a*t},u.prototype.$preMultiplyInto=function(e,t){var n=e.a*this.a,i=0,r=0,o=e.d*this.d,a=e.tx*this.a+this.tx,u=e.ty*this.d+this.ty;0===e.b&&0===e.c&&0===this.b&&0===this.c||(n+=e.b*this.c,o+=e.c*this.b,i+=e.a*this.b+e.b*this.d,r+=e.c*this.a+e.d*this.c,a+=e.ty*this.c,u+=e.tx*this.b),t.a=n,t.b=i,t.c=r,t.d=o,t.tx=a,t.ty=u},t.default=u},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function a(){return i||((i=new BK.WebGL).id=0,i.DEPTH_BUFFER_BIT=256,i.STENCIL_BUFFER_BIT=1024,i.COLOR_BUFFER_BIT=16384,i.POINTS=0,i.LINES=1,i.LINE_LOOP=2,i.LINE_STRIP=3,i.TRIANGLES=4,i.TRIANGLE_STRIP=5,i.TRIANGLE_FAN=6,i.ZERO=0,i.ONE=1,i.SRC_COLOR=768,i.ONE_MINUS_SRC_COLOR=769,i.SRC_ALPHA=770,i.ONE_MINUS_SRC_ALPHA=771,i.DST_ALPHA=772,i.ONE_MINUS_DST_ALPHA=773,i.DST_COLOR=774,i.ONE_MINUS_DST_COLOR=775,i.SRC_ALPHA_SATURATE=776,i.FUNC_ADD=32774,i.BLEND_EQUATION=32777,i.BLEND_EQUATION_RGB=32777,i.BLEND_EQUATION_ALPHA=34877,i.FUNC_SUBTRACT=32778,i.FUNC_REVERSE_SUBTRACT=32779,i.BLEND_DST_RGB=32968,i.BLEND_SRC_RGB=32969,i.BLEND_DST_ALPHA=32970,i.BLEND_SRC_ALPHA=32971,i.CONSTANT_COLOR=32769,i.ONE_MINUS_CONSTANT_COLOR=32770,i.CONSTANT_ALPHA=32771,i.ONE_MINUS_CONSTANT_ALPHA=32772,i.BLEND_COLOR=32773,i.ARRAY_BUFFER=34962,i.ELEMENT_ARRAY_BUFFER=34963,i.ARRAY_BUFFER_BINDING=34964,i.ELEMENT_ARRAY_BUFFER_BINDING=34965,i.STREAM_DRAW=35040,i.STATIC_DRAW=35044,i.DYNAMIC_DRAW=35048,i.BUFFER_SIZE=34660,i.BUFFER_USAGE=34661,i.CURRENT_VERTEX_ATTRIB=34342,i.FRONT=1028,i.BACK=1029,i.FRONT_AND_BACK=1032,i.CULL_FACE=2884,i.BLEND=3042,i.DITHER=3024,i.STENCIL_TEST=2960,i.DEPTH_TEST=2929,i.SCISSOR_TEST=3089,i.POLYGON_OFFSET_FILL=32823,i.SAMPLE_ALPHA_TO_COVERAGE=32926,i.SAMPLE_COVERAGE=32928,i.NO_ERROR=0,i.INVALID_ENUM=1280,i.INVALID_VALUE=1281,i.INVALID_OPERATION=1282,i.OUT_OF_MEMORY=1285,i.CW=2304,i.CCW=2305,i.LINE_WIDTH=2849,i.ALIASED_POINT_SIZE_RANGE=33901,i.ALIASED_LINE_WIDTH_RANGE=33902,i.CULL_FACE_MODE=2885,i.FRONT_FACE=2886,i.DEPTH_RANGE=2928,i.DEPTH_WRITEMASK=2930,i.DEPTH_CLEAR_VALUE=2931,i.DEPTH_FUNC=2932,i.STENCIL_CLEAR_VALUE=2961,i.STENCIL_FUNC=2962,i.STENCIL_FAIL=2964,i.STENCIL_PASS_DEPTH_FAIL=2965,i.STENCIL_PASS_DEPTH_PASS=2966,i.STENCIL_REF=2967,i.STENCIL_VALUE_MASK=2963,i.STENCIL_WRITEMASK=2968,i.STENCIL_BACK_FUNC=34816,i.STENCIL_BACK_FAIL=34817,i.STENCIL_BACK_PASS_DEPTH_FAIL=34818,i.STENCIL_BACK_PASS_DEPTH_PASS=34819,i.STENCIL_BACK_REF=36003,i.STENCIL_BACK_VALUE_MASK=36004,i.STENCIL_BACK_WRITEMASK=36005,i.VIEWPORT=2978,i.SCISSOR_BOX=3088,i.COLOR_CLEAR_VALUE=3106,i.COLOR_WRITEMASK=3107,i.UNPACK_ALIGNMENT=3317,i.PACK_ALIGNMENT=3333,i.MAX_TEXTURE_SIZE=3379,i.MAX_VIEWPORT_DIMS=3386,i.SUBPIXEL_BITS=3408,i.RED_BITS=3410,i.GREEN_BITS=3411,i.BLUE_BITS=3412,i.ALPHA_BITS=3413,i.DEPTH_BITS=3414,i.STENCIL_BITS=3415,i.POLYGON_OFFSET_UNITS=10752,i.POLYGON_OFFSET_FACTOR=32824,i.TEXTURE_BINDING_2D=32873,i.SAMPLE_BUFFERS=32936,i.SAMPLES=32937,i.SAMPLE_COVERAGE_VALUE=32938,i.SAMPLE_COVERAGE_INVERT=32939,i.COMPRESSED_TEXTURE_FORMATS=34467,i.DONT_CARE=4352,i.FASTEST=4353,i.NICEST=4354,i.GENERATE_MIPMAP_HINT=33170,i.BYTE=5120,i.UNSIGNED_BYTE=5121,i.SHORT=5122,i.UNSIGNED_SHORT=5123,i.INT=5124,i.UNSIGNED_INT=5125,i.FLOAT=5126,i.DEPTH_COMPONENT=6402,i.ALPHA=6406,i.RGB=6407,i.RGBA=6408,i.LUMINANCE=6409,i.LUMINANCE_ALPHA=6410,i.UNSIGNED_SHORT_4_4_4_4=32819,i.UNSIGNED_SHORT_5_5_5_1=32820,i.UNSIGNED_SHORT_5_6_5=33635,i.FRAGMENT_SHADER=35632,i.VERTEX_SHADER=35633,i.MAX_VERTEX_ATTRIBS=34921,i.MAX_VERTEX_UNIFORM_VECTORS=36347,i.MAX_VARYING_VECTORS=36348,i.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,i.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,i.MAX_TEXTURE_IMAGE_UNITS=34930,i.MAX_FRAGMENT_UNIFORM_VECTORS=36349,i.SHADER_TYPE=35663,i.DELETE_STATUS=35712,i.LINK_STATUS=35714,i.VALIDATE_STATUS=35715,i.ATTACHED_SHADERS=35717,i.ACTIVE_UNIFORMS=35718,i.ACTIVE_ATTRIBUTES=35721,i.SHADING_LANGUAGE_VERSION=35724,i.CURRENT_PROGRAM=35725,i.NEVER=512,i.LESS=513,i.EQUAL=514,i.LEQUAL=515,i.GREATER=516,i.NOTEQUAL=517,i.GEQUAL=518,i.ALWAYS=519,i.KEEP=7680,i.REPLACE=7681,i.INCR=7682,i.DECR=7683,i.INVERT=5386,i.INCR_WRAP=34055,i.DECR_WRAP=34056,i.VENDOR=7936,i.RENDERER=7937,i.VERSION=7938,i.NEAREST=9728,i.LINEAR=9729,i.NEAREST_MIPMAP_NEAREST=9984,i.LINEAR_MIPMAP_NEAREST=9985,i.NEAREST_MIPMAP_LINEAR=9986,i.LINEAR_MIPMAP_LINEAR=9987,i.TEXTURE_MAG_FILTER=10240,i.TEXTURE_MIN_FILTER=10241,i.TEXTURE_WRAP_S=10242,i.TEXTURE_WRAP_T=10243,i.TEXTURE_2D=3553,i.TEXTURE=5890,i.TEXTURE_CUBE_MAP=34067,i.TEXTURE_BINDING_CUBE_MAP=34068,i.TEXTURE_CUBE_MAP_POSITIVE_X=34069,i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,i.MAX_CUBE_MAP_TEXTURE_SIZE=34076,i.TEXTURE0=33984,i.TEXTURE1=33985,i.TEXTURE2=33986,i.TEXTURE3=33987,i.TEXTURE4=33988,i.TEXTURE5=33989,i.TEXTURE6=33990,i.TEXTURE7=33991,i.TEXTURE8=33992,i.TEXTURE9=33993,i.TEXTURE10=33994,i.TEXTURE11=33995,i.TEXTURE12=33996,i.TEXTURE13=33997,i.TEXTURE14=33998,i.TEXTURE15=33999,i.TEXTURE16=34e3,i.TEXTURE17=34001,i.TEXTURE18=34002,i.TEXTURE19=34003,i.TEXTURE20=34004,i.TEXTURE21=34005,i.TEXTURE22=34006,i.TEXTURE23=34007,i.TEXTURE24=34008,i.TEXTURE25=34009,i.TEXTURE26=34010,i.TEXTURE27=34011,i.TEXTURE28=34012,i.TEXTURE29=34013,i.TEXTURE30=34014,i.TEXTURE31=34015,i.ACTIVE_TEXTURE=34016,i.REPEAT=10497,i.CLAMP_TO_EDGE=33071,i.MIRRORED_REPEAT=33648,i.FLOAT_VEC2=35664,i.FLOAT_VEC3=35665,i.FLOAT_VEC4=35666,i.INT_VEC2=35667,i.INT_VEC3=35668,i.INT_VEC4=35669,i.BOOL=35670,i.BOOL_VEC2=35671,i.BOOL_VEC3=35672,i.BOOL_VEC4=35673,i.FLOAT_MAT2=35674,i.FLOAT_MAT3=35675,i.FLOAT_MAT4=35676,i.SAMPLER_2D=35678,i.SAMPLER_CUBE=35680,i.VERTEX_ATTRIB_ARRAY_ENABLED=34338,i.VERTEX_ATTRIB_ARRAY_SIZE=34339,i.VERTEX_ATTRIB_ARRAY_STRIDE=34340,i.VERTEX_ATTRIB_ARRAY_TYPE=34341,i.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,i.VERTEX_ATTRIB_ARRAY_POINTER=34373,i.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,i.IMPLEMENTATION_COLOR_READ_TYPE=35738,i.IMPLEMENTATION_COLOR_READ_FORMAT=35739,i.COMPILE_STATUS=35713,i.LOW_FLOAT=36336,i.MEDIUM_FLOAT=36337,i.HIGH_FLOAT=36338,i.LOW_INT=36339,i.MEDIUM_INT=36340,i.HIGH_INT=36341,i.FRAMEBUFFER=36160,i.RENDERBUFFER=36161,i.RGBA4=32854,i.RGB5_A1=32855,i.RGB565=36194,i.DEPTH_COMPONENT16=33189,i.STENCIL_INDEX8=36168,i.DEPTH_STENCIL=34041,i.RENDERBUFFER_WIDTH=36162,i.RENDERBUFFER_HEIGHT=36163,i.RENDERBUFFER_INTERNAL_FORMAT=36164,i.RENDERBUFFER_RED_SIZE=36176,i.RENDERBUFFER_GREEN_SIZE=36177,i.RENDERBUFFER_BLUE_SIZE=36178,i.RENDERBUFFER_ALPHA_SIZE=36179,i.RENDERBUFFER_DEPTH_SIZE=36180,i.RENDERBUFFER_STENCIL_SIZE=36181,i.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,i.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,i.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,i.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,i.COLOR_ATTACHMENT0=36064,i.DEPTH_ATTACHMENT=36096,i.STENCIL_ATTACHMENT=36128,i.DEPTH_STENCIL_ATTACHMENT=33306,i.NONE=0,i.FRAMEBUFFER_COMPLETE=36053,i.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,i.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,i.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,i.FRAMEBUFFER_UNSUPPORTED=36061,i.FRAMEBUFFER_BINDING=36006,i.RENDERBUFFER_BINDING=36007,i.MAX_RENDERBUFFER_SIZE=34024,i.INVALID_FRAMEBUFFER_OPERATION=1286,i.UNPACK_FLIP_Y_WEBGL=37440,i.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,i.CONTEXT_LOST_WEBGL=37442,i.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,i.BROWSER_DEFAULT_WEBGL=37444,i.SHADER_BINARY_FORMATS=36344,i.NUM_SHADER_BINARY_FORMATS=36345,i.NUM_COMPRESSED_TEXTURE_FORMATS=34466,i.activeTexture=s,i.attachShader=f,i.bindAttribLocation=d,i.bindBuffer=h,i.bindFramebuffer=p,i.bindRenderbuffer=g,i.bindTexture=m,i.blendColor=v,i.blendEquation=E,i.blendEquationSeparate=y,i.blendFunc=_,i.blendFuncSeparate=b,i.bufferData=S,i.bufferData=S,i.bufferSubData=T,i.checkFramebufferStatus=A,i.clear=w,i.clearColor=C,i.clearDepth=k,i.clearStencil=N,i.colorMask=I,i.compileShader=B,i.compressedTexImage2D=R,i.compressedTexSubImage2D=P,i.copyTexImage2D=O,i.copyTexSubImage2D=F,i.createBuffer=M,i.createFramebuffer=x,i.createProgram=U,i.createRenderbuffer=D,i.createShader=L,i.createTexture=K,i.cullFace=G,i.deleteBuffer=j,i.deleteFramebuffer=V,i.deleteProgram=H,i.deleteRenderbuffer=X,i.deleteShader=z,i.deleteTexture=q,i.depthFunc=W,i.depthMask=Y,i.depthRange=Q,i.detachShader=$,i.disable=J,i.disableVertexAttribArray=Z,i.drawArrays=ee,i.drawElements=te,i.enable=ne,i.enableVertexAttribArray=ie,i.finish=re,i.flush=oe,i.framebufferRenderbuffer=ae,i.framebufferTexture2D=ue,i.frontFace=le,i.generateMipmap=ce,i.getAttribLocation=se,i.getError=fe,i.getProgramInfoLog=he,i.getShaderInfoLog=pe,i.getShaderSource=ge,i.getUniformLocation=me,i.getVertexAttribOffset=ve,i.hint=Ee,i.isBuffer=ye,i.isEnabled=_e,i.isFramebuffer=be,i.isProgram=Se,i.isRenderbuffer=Te,i.isShader=Ae,i.isTexture=we,i.lineWidth=Ce,i.linkProgram=ke,i.pixelStorei=Ne,i.polygonOffset=Ie,i.readPixels=Be,i.renderbufferStorage=Re,i.sampleCoverage=Pe,i.scissor=Oe,i.shaderSource=Fe,i.stencilFunc=Me,i.stencilFuncSeparate=xe,i.stencilMask=Ue,i.stencilMaskSeparate=De,i.stencilOp=Le,i.stencilOpSeparate=Ke,i.texImage2D=Ge,i.texSubImage2D=He,i.texParameterf=je,i.texParameteri=Ve,i.uniform1f=Xe,i.uniform2f=ze,i.uniform3f=qe,i.uniform4f=We,i.uniform1i=Ye,i.uniform2i=Qe,i.uniform3i=$e,i.uniform4i=Je,i.uniform1fv=Ze,i.uniform2fv=et,i.uniform3fv=tt,i.uniform4fv=nt,i.uniform1iv=it,i.uniform2iv=rt,i.uniform3iv=ot,i.uniform4iv=at,i.uniformMatrix2fv=ut,i.uniformMatrix3fv=lt,i.uniformMatrix4fv=ct,i.useProgram=st,i.validateProgram=ft,i.vertexAttrib1f=dt,i.vertexAttrib2f=ht,i.vertexAttrib3f=pt,i.vertexAttrib4f=gt,i.vertexAttrib1fv=mt,i.vertexAttrib2fv=vt,i.vertexAttrib3fv=Et,i.vertexAttrib4fv=yt,i.vertexAttribPointer=_t,i.viewport=bt,i.getActiveAttrib=St,i.getActiveUniform=Tt,i.getAttachedShaders=At,i.getBufferParameter=wt,i.getFramebufferAttachmentParameter=Ct,i.getProgramParameter=kt,i.getRenderbufferParameter=Nt,i.getShaderParameter=It,i.getTexParameter=Bt,i.getVertexAttrib=Rt,i.getParameter=Ot,i.getUniform=Pt,i.getShaderPrecisionFormat=de,i.getExtension=function(){return null},i.getSupportedExtensions=function(){return[]},i.getContextAttributes=function(){return{alpha:!0,antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!1,powerPreference:"default",premultipliedAlpha:!0,preserveDrawingBuffer:!1,stencil:!0}},i.isContextLost=function(){return!1},i.isContextLost=function(){return!1},i.OpenOptMode=yi,i.viewport(0,0,BK.Director.screenPixelSize.width,BK.Director.screenPixelSize.height)),Object.prototype.hasOwnProperty.call(GameGlobal,"renderTicker")&&renderTicker.setTickerCallBack(function(e,t){}),i}function u(e){if(Object.prototype.hasOwnProperty.call(e,"__rawBKData"))return e.__rawBKData;if(Object.prototype.hasOwnProperty.call(e,"__nativeObj"))return e.__nativeObj;if(0==function(){if(void 0==r){"android"==GameStatusInfo.platform&&(r=!0);var e=BK.Director.queryDeviceInfo(),t=e.version.split(".");"ios"==e.platform&&Number(t[0])>=10||"android"==e.platform?r=!0:(BK.Script.log(1,0,"Current Device dont supoort TypedArray.[info = "+JSON.stringify(e)+"]"),r=!1)}return r}()){if(e instanceof Int8Array==1){for(var t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeInt8Buffer(e[n]);return t}if(e instanceof Uint8Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeUint8Buffer(e[n]);return t}if(e instanceof Int16Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeInt16Buffer(e[n]);return t}if(e instanceof Uint16Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeUint16Buffer(e[n]);return t}if(e instanceof Int32Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeInt32Buffer(e[n]);return t}if(e instanceof Uint32Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeUint32Buffer(e[n]);return t}if(e instanceof Float32Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeFloatBuffer(e[n]);return t}if(e instanceof ArrayBuffer==1){t=new BK.Buffer(e.byteLength,!1);var i=new DataView(e);for(n=0;n<e.byteLength;n++)t.writeUint8Buffer(i.getUint8(n));return t}}return e}var l=!1;function c(){0==l&&(BK.MQQ.SsoRequest.send({},"cs.first_frame_drawn.local"),l=!0)}function s(e){i.glActiveTexture(e)}function f(e,t){i.glAttachShader(e,t)}function d(e,t,n){i.glBindAttribLocation(e,t,n)}function h(e,t){i.glBindBuffer(e,t)}function p(e,t){i.glBindFramebuffer(e,t)}function g(e,t){i.glBindRenderbuffer(e,t)}function m(e,t){i.glBindTexture(e,t)}function v(e,t,n,r){i.glBlendColor(e,t,n,r)}function E(e){i.glBlendEquation(e)}function y(e,t){i.glBlendEquationSeparate(e,t)}function _(e,t){i.glBlendFunc(e,t)}function b(e,t,n,r){i.glBlendFuncSeparate(e,t,n,r)}function S(e,t,n){i.glBufferData(e,t,n)}function S(e,t,n){i.glBufferData(e,u(t),n)}function T(e,t,n){i.glBufferSubData(e,t,u(n))}function A(e){return i.glCheckFramebufferStatus(e)}function w(e){i.glClear(e)}function C(e,t,n,r){i.glClearColor(e,t,n,r)}function k(e){i.glClearDepth(e)}function N(e){i.glClearStencil(e)}function I(e,t,n,r){i.glColorMask(e,t,n,r)}function B(e){i.glCompileShader(e)}function R(e,t,n,r,o,a,u){i.glCompressedTexImage2D(e,t,n,r,o,a,u)}function P(e,t,n,r,o,a,u,l){i.glCompressedTexSubImage2D(e,t,n,r,o,a,u,l)}function O(e,t,n,r,o,a,u,l){i.glCopyTexImage2D(e,t,n,r,o,a,u,l)}function F(e,t,n,r,o,a,u,l){i.glCopyTexSubImage2D(e,t,n,r,o,a,u,l)}function M(){return i.glCreateBuffer()}function x(){return i.glCreateFramebuffer()}function U(){return i.glCreateProgram()}function D(){return i.glCreateRenderbuffer()}function L(e){return i.glCreateShader(e)}function K(){return i.glCreateTexture()}function G(e){i.glCullFace(e)}function j(e){i.glDeleteBuffer(e)}function V(e){i.glDeleteFramebuffer(e)}function H(e){i.glDeleteProgram(e)}function X(e){i.glDeleteRenderbuffer(e)}function z(e){i.glDeleteShader(e)}function q(e){i.glDeleteTexture(e)}function W(e){i.glDepthFunc(e)}function Y(e){i.glDepthMask(e)}function Q(e,t){i.glDepthRange(e,t)}function $(e,t){i.glDetachShader(e,t)}function J(e){i.glDisable(e)}function Z(e){i.glDisableVertexAttribArray(e)}function ee(e,t,n){i.glDrawArrays(e,t,n),n>0&&c()}function te(e,t,n,r){i.glDrawElements(e,t,n,r),t>0&&c()}function ne(e){i.glEnable(e)}function ie(e){i.glEnableVertexAttribArray(e)}function re(){i.glFinish()}function oe(){i.glFlush()}function ae(e,t,n,r){i.glFramebufferRenderbuffer(e,t,n,r)}function ue(e,t,n,r,o){i.glFramebufferTexture2D(e,t,n,r,o)}function le(e){i.glFrontFace(e)}function ce(e){i.glGenerateMipmap(e)}function se(e,t){return i.glGetAttribLocation(e,t)}function fe(){return i.glGetError()}function de(e,t){return i.glGetShaderPrecisionFormat(e,t)}function he(e){return i.glGetProgramInfoLog(e)}function pe(e){return i.glGetShaderInfoLog(e)}function ge(e){return i.glGetShaderSource(e)}function me(e,t){return i.glGetUniformLocation(e,t)}function ve(e,t){return i.glGetVertexAttribOffset(e,t)}function Ee(e,t){i.glHint(e,t)}function ye(e){return i.glIsBuffer(e)}function _e(e){return i.glIsEnabled(e)}function be(e){return i.glIsFramebuffer(e)}function Se(e){return i.glIsProgram(e)}function Te(e){return i.glIsRenderbuffer(e)}function Ae(e){return i.glIsShader(e)}function we(e){return i.glIsTexture(e)}function Ce(e){i.glLineWidth(e)}function ke(e){i.glLinkProgram(e)}function Ne(e,t){i.glPixelStorei(e,t)}function Ie(e,t){i.glPolygonOffset(e,t)}function Be(e,t,n,r,o,a,u){i.glReadPixels(e,t,n,r,o,a,u)}function Re(e,t,n,r){i.glRenderbufferStorage(e,t,n,r)}function Pe(e,t){i.glSampleCoverage(e,t)}function Oe(e,t,n,r){i.glScissor(e,t,n,r)}function Fe(e,t){i.glShaderSource(e,t)}function Me(e,t,n){i.glStencilFunc(e,t,n)}function xe(e,t,n,r){i.glStencilFuncSeparate(e,t,n,r)}function Ue(e){i.glStencilMask(e)}function De(e,t){i.glStencilMaskSeparate(e,t)}function Le(e,t,n){i.glStencilOp(e,t,n)}function Ke(e,t,n,r){i.glStencilOpSeparate(e,t,n,r)}function Ge(e,t,n){switch(arguments.length){case 6:var r=arguments[3],o=arguments[4],a=arguments[5];Object.prototype.hasOwnProperty.call(a,"__nativeObj")?i.glTexImage2D(e,t,n,r,o,a.__nativeObj):a.bkImage?i.glTexImage2D(e,t,n,r,o,a.bkImage):i.glTexImage2D(e,t,n,r,o,a);break;case 9:var u=arguments[3],l=arguments[4],c=arguments[5],s=(r=arguments[6],o=arguments[7],arguments[8]);i.glTexImage2D(e,t,n,u,l,c,r,o,s)}}function je(e,t,n){i.glTexParameterf(e,t,n)}function Ve(e,t,n){i.glTexParameteri(e,t,n)}function He(e,t,n,r){switch(arguments.length){case 7:var o=arguments[4],a=arguments[5],u=arguments[6];Object.prototype.hasOwnProperty.call(u,"__nativeObj")?i.glTexSubImage2D(e,t,n,r,o,a,u.__nativeObj):i.glTexSubImage2D(e,t,n,r,o,a,u);break;case 9:var l=arguments[4],c=arguments[5],s=(o=arguments[6],a=arguments[7],arguments[8]);i.glTexSubImage2D(e,t,n,r,l,c,o,a,s)}}function Xe(e,t){i.glUniform1f(e,t)}function ze(e,t,n){i.glUniform2f(e,t,n)}function qe(e,t,n,r){i.glUniform3f(e,t,n,r)}function We(e,t,n,r,o){i.glUniform4f(e,t,n,r,o)}function Ye(e,t){i.glUniform1i(e,t)}function Qe(e,t,n){i.glUniform2i(e,t,n)}function $e(e,t,n,r){i.glUniform3i(e,t,n,r)}function Je(e,t,n,r,o){i.glUniform4i(e,t,n,r,o)}function Ze(e,t){i.glUniform1fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function et(e,t){i.glUniform2fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function tt(e,t){i.glUniform3fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function nt(e,t){i.glUniform4fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function it(e,t){i.glUniform1iv(e,u(t instanceof Array==1?new Int32Array(t):t))}function rt(e,t){i.glUniform2iv(e,u(t instanceof Array==1?new Int32Array(t):t))}function ot(e,t){i.glUniform3iv(e,u(t instanceof Array==1?new Int32Array(t):t))}function at(e,t){i.glUniform4iv(e,u(t instanceof Array==1?new Int32Array(t):t))}function ut(e,t,n){i.glUniformMatrix2fv(e,t,u(n instanceof Array==1?new Float32Array(n):n))}function lt(e,t,n){i.glUniformMatrix3fv(e,t,u(n instanceof Array==1?new Float32Array(n):n))}function ct(e,t,n){i.glUniformMatrix4fv(e,t,u(n instanceof Array==1?new Float32Array(n):n))}function st(e){i.glUseProgram(e)}function ft(e){i.glValidateProgram(e)}function dt(e,t){i.glVertexAttrib1f(e,t)}function ht(e,t,n){i.glVertexAttrib2f(e,t,n)}function pt(e,t,n,r){i.glVertexAttrib3f(e,t,n,r)}function gt(e,t,n,r,o){i.glVertexAttrib4f(e,t,n,r,o)}function mt(e,t){i.glVertexAttrib1fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function vt(e,t){i.glVertexAttrib2fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function Et(e,t){i.glVertexAttrib3fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function yt(e,t){i.glVertexAttrib4fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function _t(e,t,n,r,o,a){i.glVertexAttribPointer(e,t,n,r,o,a)}function bt(e,t,n,r){i.glViewport(e,t,n,r)}function St(e,t){return i.glGetActiveAttrib(e,t)}function Tt(e,t){return i.glGetActiveUniform(e,t)}function At(e){return i.glGetAttachedShaders(e)}function wt(e,t){return i.glGetBufferParameter(e,t)}function Ct(e,t,n){return i.glGetFramebufferAttachmentParameter(e,t,n)}function kt(e,t){return i.glGetProgramParameter(e,t)}function Nt(e,t){return i.glGetRenderbufferParameter(e,t)}function It(e,t){return i.glGetShaderParameter(e,t)}function Bt(e,t){return i.glGetTexParameter(e,t)}function Rt(e,t){return i.glGetVertexAttrib(e,t)}function Pt(e,t){return i.glGetUniform(e,t)}function Ot(e){switch(e){case i.ACTIVE_TEXTURE:case i.ALPHA_BITS:case i.ARRAY_BUFFER_BINDING:case i.BLUE_BITS:case i.CULL_FACE_MODE:case i.CURRENT_PROGRAM:case i.DEPTH_BITS:case i.DEPTH_FUNC:case i.ELEMENT_ARRAY_BUFFER_BINDING:case i.FRAMEBUFFER_BINDING:case i.FRONT_FACE:case i.GENERATE_MIPMAP_HINT:case i.GREEN_BITS:case i.IMPLEMENTATION_COLOR_READ_FORMAT:case i.IMPLEMENTATION_COLOR_READ_TYPE:case i.MAX_COMBINED_TEXTURE_IMAGE_UNITS:case i.MAX_CUBE_MAP_TEXTURE_SIZE:case i.MAX_FRAGMENT_UNIFORM_VECTORS:case i.MAX_RENDERBUFFER_SIZE:case i.MAX_TEXTURE_IMAGE_UNITS:case i.MAX_TEXTURE_SIZE:case i.MAX_VARYING_VECTORS:case i.MAX_VERTEX_ATTRIBS:case i.MAX_VERTEX_TEXTURE_IMAGE_UNITS:case i.MAX_VERTEX_UNIFORM_VECTORS:case i.MAX_VIEWPORT_DIMS:case i.NUM_COMPRESSED_TEXTURE_FORMATS:case i.NUM_SHADER_BINARY_FORMATS:case i.PACK_ALIGNMENT:case i.RED_BITS:case i.RENDERBUFFER_BINDING:case i.SAMPLE_BUFFERS:case i.SAMPLES:case i.STENCIL_BACK_FAIL:case i.STENCIL_BACK_FUNC:case i.STENCIL_BACK_PASS_DEPTH_FAIL:case i.STENCIL_BACK_PASS_DEPTH_PASS:case i.STENCIL_BACK_REF:case i.STENCIL_BACK_VALUE_MASK:case i.STENCIL_BACK_WRITEMASK:case i.STENCIL_BITS:case i.STENCIL_CLEAR_VALUE:case i.STENCIL_FAIL:case i.STENCIL_FUNC:case i.STENCIL_PASS_DEPTH_FAIL:case i.STENCIL_PASS_DEPTH_PASS:case i.STENCIL_REF:case i.STENCIL_VALUE_MASK:case i.STENCIL_WRITEMASK:case i.SUBPIXEL_BITS:case i.TEXTURE_BINDING_2D:case i.TEXTURE_BINDING_CUBE_MAP:case i.UNPACK_ALIGNMENT:case i.BLEND_DST_ALPHA:case i.BLEND_DST_RGB:case i.BLEND_EQUATION_ALPHA:case i.BLEND_EQUATION_RGB:case i.BLEND_SRC_ALPHA:case i.BLEND_SRC_RGB:return i.glGetParameterInt(e,1);case i.ALIASED_LINE_WIDTH_RANGE:case i.ALIASED_POINT_SIZE_RANGE:case i.DEPTH_RANGE:case i.MAX_VIEWPORT_DIMS:return i.glGetParameterFloat(e,2);case i.BLEND:case i.CULL_FACE:case i.DEPTH_TEST:case i.DEPTH_WRITEMASK:case i.DITHER:case i.POLYGON_OFFSET_FILL:case i.SAMPLE_ALPHA_TO_COVERAGE:case i.SAMPLE_COVERAGE:case i.SAMPLE_COVERAGE_INVERT:case i.SCISSOR_TEST:case i.SHADER_COMPILER:case i.STENCIL_TEST:return i.glGetParameterBool(e,1);case i.BLEND_COLOR:case i.COLOR_CLEAR_VALUE:return i.glGetParameterFloat(e,4);case i.SCISSOR_BOX:case i.VIEWPORT:return i.glGetParameterInt(e,4);case i.COLOR_WRITEMASK:return i.glGetParameterBool(e,4);case i.POLYGON_OFFSET_FACTOR:case i.POLYGON_OFFSET_UNITS:case i.SAMPLE_COVERAGE_VALUE:return i.glGetParameterFloat(e,1);case i.SHADER_BINARY_FORMATS:var t=i.glGetParameterInt(i.NUM_SHADER_BINARY_FORMATS,1);return i.glGetParameterInt(e,t);case i.COMPRESSED_TEXTURE_FORMATS:t=i.glGetParameterInt(i.NUM_COMPRESSED_TEXTURE_FORMATS,1);return i.glGetParameterInt(e,t);case i.VERSION:return"WebGL 1"}}var Ft,Mt=0,xt=1,Ut=3,Dt=4,Lt=5,Kt=6,Gt=7,jt=8,Vt=9,Ht=10,Xt=11,zt=14,qt=15,Wt=16,Yt=17,Qt=18,$t=20,Jt=23,Zt=24,en=25,tn=26,nn=27,rn=28,on=29,an=30,un=31,ln=32,cn=33,sn=34,fn=35,dn=36,hn=37,pn=38,gn=39,mn=40,vn=41,En=42,yn=43,_n=44,bn=45,Sn=46,Tn=47,An=48,wn=49,Cn=50,kn=51,Nn=52,In=53,Bn=54,Rn=55,Pn=57,On=58,Fn=59,Mn=60,xn=61,Un=62,Dn=64,Ln=65,Kn=67,Gn=68,jn=69,Vn=70,Hn=71,Xn=72,zn=73,qn=74,Wn=75,Yn=76,Qn=77,$n=78,Jn=79,Zn=80,ei=81,ti=82,ni=83,ii=84,ri=85,oi=86,ai=87,ui=88,li=89,ci=90,si=91,fi=92,di=93,hi=94,pi=95,gi=96,mi=97,vi=1e5,Ei=0;function yi(){i.flushCommand&&function(){if("android"==GameStatusInfo.platform)return!0;var e=BK.Director.queryDeviceInfo(),t=e.version.split(".");if("ios"==e.platform&&Number(t[0])>=10)return!0;return!1}()&&(i.activeTexture=Si,i.attachShader=Ti,i.bindAttribLocation=Ai,i.bindBuffer=wi,i.bindFramebuffer=Ci,i.bindRenderbuffer=ki,i.bindTexture=Ni,i.blendColor=Ii,i.blendEquation=Bi,i.blendEquationSeparate=Ri,i.blendFunc=Pi,i.blendFuncSeparate=Oi,i.bufferData=Fi,i.bufferData=Fi,i.bufferSubData=Mi,i.checkFramebufferStatus=xi,i.clear=Ui,i.clearColor=Di,i.clearDepth=Li,i.clearStencil=Ki,i.colorMask=Gi,i.compileShader=ji,i.compressedTexImage2D=Vi,i.compressedTexSubImage2D=Hi,i.copyTexImage2D=Xi,i.copyTexSubImage2D=zi,i.createBuffer=qi,i.createFramebuffer=Wi,i.createProgram=Yi,i.createRenderbuffer=Qi,i.createShader=$i,i.createTexture=Ji,i.cullFace=Zi,i.deleteBuffer=er,i.deleteFramebuffer=tr,i.deleteProgram=nr,i.deleteRenderbuffer=ir,i.deleteShader=rr,i.deleteTexture=or,i.depthFunc=ar,i.depthMask=ur,i.depthRange=lr,i.detachShader=cr,i.disable=sr,i.disableVertexAttribArray=fr,i.drawArrays=dr,i.drawElements=hr,i.enable=pr,i.enableVertexAttribArray=gr,i.finish=mr,i.flush=vr,i.framebufferRenderbuffer=Er,i.framebufferTexture2D=yr,i.frontFace=_r,i.generateMipmap=br,i.getActiveAttrib=Sr,i.getActiveUniform=Tr,i.getAttachedShaders=Ar,i.getAttribLocation=wr,i.getBufferParameter=Cr,i.getParameter=kr,i.getError=Nr,i.getFramebufferAttachmentParameter=Ir,i.getProgramParameter=Br,i.getProgramInfoLog=Rr,i.getRenderbufferParameter=Pr,i.getShaderParameter=Or,i.getShaderPrecisionFormat=Fr,i.getShaderInfoLog=Mr,i.getShaderSource=xr,i.getTexParameter=Ur,i.getUniform=Dr,i.getUniformLocation=Lr,i.getVertexAttrib=Kr,i.getVertexAttribOffset=Gr,i.hint=jr,i.isBuffer=Vr,i.isEnabled=Hr,i.isFramebuffer=Xr,i.isProgram=zr,i.isRenderbuffer=qr,i.isShader=Wr,i.isTexture=Yr,i.lineWidth=Qr,i.linkProgram=$r,i.pixelStorei=Jr,i.polygonOffset=Zr,i.readPixels=eo,i.renderbufferStorage=to,i.sampleCoverage=no,i.scissor=io,i.shaderSource=ro,i.stencilFunc=oo,i.stencilFuncSeparate=ao,i.stencilMask=uo,i.stencilMaskSeparate=lo,i.stencilOp=co,i.stencilOpSeparate=so,i.texImage2D=fo,i.texImage2D=fo,i.texParameterf=ho,i.texParameteri=po,i.texSubImage2D=go,i.texSubImage2D=go,i.uniform1f=mo,i.uniform2f=vo,i.uniform3f=Eo,i.uniform4f=yo,i.uniform1i=_o,i.uniform2i=bo,i.uniform3i=So,i.uniform4i=To,i.uniform1fv=Ao,i.uniform2fv=wo,i.uniform3fv=Co,i.uniform4fv=ko,i.uniform1iv=No,i.uniform2iv=Io,i.uniform3iv=Bo,i.uniform4iv=Ro,i.uniformMatrix2fv=Po,i.uniformMatrix3fv=Oo,i.uniformMatrix4fv=Fo,i.useProgram=Mo,i.validateProgram=xo,i.vertexAttrib1f=Uo,i.vertexAttrib2f=Do,i.vertexAttrib3f=Lo,i.vertexAttrib4f=Ko,i.vertexAttrib1fv=Go,i.vertexAttrib2fv=jo,i.vertexAttrib3fv=Vo,i.vertexAttrib4fv=Ho,i.vertexAttribPointer=Xo,i.viewport=zo,i.glCommit=bi,i.getExtension=function(){return null}),Ft=new Float32Array(vi)}function _i(){Ei>0&&(i.flushCommand(Ei,Ft),Ei=0)}function bi(){_i(),i.commit()}function Si(e){Ei+2>vi&&_i(),Ft[Ei]=Mt,Ft[Ei+1]=e,Ei+=2}function Ti(e,t){Ei+3>vi&&_i(),Ft[Ei]=xt,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function Ai(e,t,n){_i(),d(e,t,n)}function wi(e,t){Ei+3>vi&&_i(),Ft[Ei]=Ut,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function Ci(e,t){Ei+3>vi&&_i(),Ft[Ei]=Dt,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function ki(e,t){Ei+3>vi&&_i(),Ft[Ei]=Lt,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function Ni(e,t){Ei+3>vi&&_i(),Ft[Ei]=Kt,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function Ii(e,t,n,i){Ei+5>vi&&_i(),Ft[Ei]=Gt,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}function Bi(e){Ei+2>vi&&_i(),Ft[Ei]=jt,Ft[Ei+1]=e,Ei+=2}function Ri(e,t){Ei+3>vi&&_i(),Ft[Ei]=Vt,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function Pi(e,t){Ei+3>vi&&_i(),Ft[Ei]=Ht,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function Oi(e,t,n,i){Ei+5>vi&&_i(),Ft[Ei]=Xt,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}function Fi(e,t,n){_i(),S(e,t,n)}function Mi(e,t,n){_i(),T(e,t,n)}function xi(e){_i(),A(e)}function Ui(e){Ei+2>vi&&_i(),Ft[Ei]=zt,Ft[Ei+1]=e,Ei+=2}function Di(e,t,n,i){Ei+5>vi&&_i(),Ft[Ei]=qt,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}function Li(e){Ei+2>vi&&_i(),Ft[Ei]=Wt,Ft[Ei+1]=e,Ei+=2}function Ki(e){Ei+2>vi&&_i(),Ft[Ei]=Yt,Ft[Ei+1]=e,Ei+=2}function Gi(e,t,n,i){Ei+5>vi&&_i(),Ft[Ei]=Qt,Ft[Ei+1]=e?1:0,Ft[Ei+2]=t?1:0,Ft[Ei+3]=n?1:0,Ft[Ei+4]=i?1:0,Ei+=5}function ji(e){Ei+2>vi&&_i(),Ft[Ei]=$t,Ft[Ei+1]=e,Ei+=2}function Vi(e,t,n,i,r,o,a){_i(),R(e,t,n,i,r,o,a)}function Hi(e,t,n,i,r,o,a,u){_i(),P(e,t,n,i,r,o,a,u)}function Xi(e,t,n,i,r,o,a,u){Ei+9>vi&&_i(),Ft[Ei]=Jt,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ft[Ei+5]=r,Ft[Ei+6]=o,Ft[Ei+7]=a,Ft[Ei+8]=u,Ei+=9}function zi(e,t,n,i,r,o,a,u){Ei+9>vi&&_i(),Ft[Ei]=Zt,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ft[Ei+5]=r,Ft[Ei+6]=o,Ft[Ei+7]=a,Ft[Ei+8]=u,Ei+=9}function qi(){return _i(),M()}function Wi(){return _i(),x()}function Yi(){return _i(),U()}function Qi(){return _i(),D()}function $i(e){return _i(),L(e)}function Ji(){return _i(),K()}function Zi(e){Ei+2>=vi&&_i(),Ft[Ei]=en,Ft[Ei+1]=e,Ei+=2}function er(e){Ei+2>=vi&&_i(),Ft[Ei]=tn,Ft[Ei+1]=e,Ei+=2}function tr(e){Ei+2>=vi&&_i(),Ft[Ei]=nn,Ft[Ei+1]=e,Ei+=2}function nr(e){Ei+2>=vi&&_i(),Ft[Ei]=rn,Ft[Ei+1]=e,Ei+=2}function ir(e){Ei+2>=vi&&_i(),Ft[Ei]=on,Ft[Ei+1]=e,Ei+=2}function rr(e){Ei+2>=vi&&_i(),Ft[Ei]=an,Ft[Ei+1]=e,Ei+=2}function or(e){Ei+2>=vi&&_i(),Ft[Ei]=un,Ft[Ei+1]=e,Ei+=2}function ar(e){Ei+2>=vi&&_i(),Ft[Ei]=ln,Ft[Ei+1]=e,Ei+=2}function ur(e){Ei+2>=vi&&_i(),Ft[Ei]=cn,Ft[Ei+1]=e?1:0,Ei+=2}function lr(e,t){Ei+3>=vi&&_i(),Ft[Ei]=sn,Ft[Ei+1]=e,Ft[Ei+1]=t,Ei+=3}function cr(e,t){Ei+3>=vi&&_i(),Ft[Ei]=fn,Ft[Ei+1]=e,Ft[Ei+1]=t,Ei+=3}function sr(e){Ei+2>=vi&&_i(),Ft[Ei]=dn,Ft[Ei+1]=e,Ei+=2}function fr(e){Ei+2>=vi&&_i(),Ft[Ei]=hn,Ft[Ei+1]=e,Ei+=2}function dr(e,t,n){Ei+4>=vi&&_i(),Ft[Ei]=pn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ei+=4,n>0&&c()}function hr(e,t,n,i){Ei+5>=vi&&_i(),Ft[Ei]=gn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5,t>0&&c()}function pr(e){Ei+2>=vi&&_i(),Ft[Ei]=mn,Ft[Ei+1]=e,Ei+=2}function gr(e){Ei+2>=vi&&_i(),Ft[Ei]=vn,Ft[Ei+1]=e,Ei+=2}function mr(){Ei+1>=vi&&_i(),Ft[Ei]=En,Ei+=1}function vr(){Ei+1>=vi&&_i(),Ft[Ei]=yn,Ei+=1}function Er(e,t,n,i){Ei+5>=vi&&_i(),Ft[Ei]=_n,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}function yr(e,t,n,i,r){Ei+6>=vi&&_i(),Ft[Ei]=bn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ft[Ei+5]=r,Ei+=6}function _r(e){Ei+2>=vi&&_i(),Ft[Ei]=Sn,Ft[Ei+1]=e,Ei+=2}function br(e){Ei+2>=vi&&_i(),Ft[Ei]=Tn,Ft[Ei+1]=e,Ei+=2}function Sr(e,t){return _i(),St(e,t)}function Tr(e,t){return _i(),Tt(e,t)}function Ar(e){return _i(),At(e)}function wr(e,t){return _i(),se(e,t)}function Cr(e,t){return _i(),wt(e,t)}function kr(e){return _i(),Ot(e)}function Nr(){return _i(),fe()}function Ir(e,t,n){return _i(),Ct(e,t,n)}function Br(e,t){return _i(),kt(e,t)}function Rr(e){return _i(),he(e)}function Pr(e,t){return _i(),Nt(e,t)}function Or(e,t){return _i(),It(e,t)}function Fr(e,t){return _i(),de(e,t)}function Mr(e){return _i(),pe(e)}function xr(e){return _i(),ge(e)}function Ur(e,t){return _i(),Bt(e,t)}function Dr(e,t){return _i(),Pt(e,t)}function Lr(e,t){return _i(),me(e,t)}function Kr(e,t){return _i(),Rt(e,t)}function Gr(e,t){return _i(),ve(e,t)}function jr(e,t){Ei+3>=vi&&_i(),Ft[Ei]=An,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function Vr(e){return _i(),ye(e)}function Hr(e){return _i(),_e(e)}function Xr(e){return _i(),be(e)}function zr(e){return _i(),Se(e)}function qr(e){return _i(),Te(e)}function Wr(e){return _i(),Ae(e)}function Yr(e){return _i(),we(e)}function Qr(e){Ei+2>=vi&&_i(),Ft[Ei]=wn,Ft[Ei+1]=e,Ei+=2}function $r(e){Ei+2>=vi&&_i(),Ft[Ei]=Cn,Ft[Ei+1]=e,Ei+=2}function Jr(e,t){Ei+3>=vi&&_i(),Ft[Ei]=kn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function Zr(e,t){Ei+3>=vi&&_i(),Ft[Ei]=Nn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function eo(e,t,n,i,r,o,a){_i(),Be(e,t,n,i,r,o,a)}function to(e,t,n,i){Ei+5>=vi&&_i(),Ft[Ei]=In,Ft[Ei+1]=e,Ft[Ei+2]=internalFormat,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}function no(e,t){Ei+3>=vi&&_i(),Ft[Ei]=Bn,Ft[Ei+1]=e,Ft[Ei+2]=t?1:0,Ei+=3}function io(e,t,n,i){Ei+5>=vi&&_i(),Ft[Ei]=Rn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}function ro(e,t){_i(),Fe(e,t)}function oo(e,t,n){Ei+4>=vi&&_i(),Ft[Ei]=Pn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ei+=4}function ao(e,t,n,i){Ei+5>=vi&&_i(),Ft[Ei]=On,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}function uo(e){Ei+2>=vi&&_i(),Ft[Ei]=Fn,Ft[Ei+1]=e,Ei+=2}function lo(e,t){Ei+3>=vi&&_i(),Ft[Ei]=Mn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function co(e,t,n){Ei+4>=vi&&_i(),Ft[Ei]=xn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ei+=4}function so(e,t,n,i){Ei+5>=vi&&_i(),Ft[Ei]=Un,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}function fo(e,t,n){switch(_i(),arguments.length){case 6:var r=arguments[3],o=arguments[4],a=arguments[5];Object.prototype.hasOwnProperty.call(a,"__nativeObj")?i.glTexImage2D(e,t,n,r,o,a.__nativeObj):a.bkImage?i.glTexImage2D(e,t,n,r,o,a.bkImage):i.glTexImage2D(e,t,n,r,o,a);break;case 9:var u=arguments[3],l=arguments[4],c=arguments[5],s=(r=arguments[6],o=arguments[7],arguments[8]);i.glTexImage2D(e,t,n,u,l,c,r,o,s)}}function ho(e,t,n){Ei+4>=vi&&_i(),Ft[Ei]=Dn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ei+=4}function po(e,t,n){Ei+4>=vi&&_i(),Ft[Ei]=Ln,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ei+=4}function go(e,t,n,i,r,o,a,u,l){_i(),He(e,t,n,i,r,o,a,u,l)}function go(e,t,n,i,r,o,a){_i(),He(e,t,n,i,r,o,a)}function mo(e,t){Ei+3>=vi&&_i(),Ft[Ei]=Kn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function vo(e,t,n){Ei+4>=vi&&_i(),Ft[Ei]=Hn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ei+=4}function Eo(e,t,n,i){Ei+5>=vi&&_i(),Ft[Ei]=Wn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}function yo(e,t,n,i,r){Ei+6>=vi&&_i(),Ft[Ei]=Jn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ft[Ei+5]=r,Ei+=6}function _o(e,t){Ei+3>=vi&&_i(),Ft[Ei]=jn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function bo(e,t,n){Ei+4>=vi&&_i(),Ft[Ei]=zn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ei+=4}function So(e,t,n,i){Ei+5>=vi&&_i(),Ft[Ei]=Qn,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}function To(e,t,n,i,r){Ei+6>=vi&&_i(),Ft[Ei]=ei,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ft[Ei+5]=r,Ei+=6}function Ao(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=Gn,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function wo(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=Xn,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function Co(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=Yn,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function ko(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=Zn,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function No(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=Vn,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function Io(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=qn,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function Bo(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=$n,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function Ro(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=ti,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function Po(e,t,n){Ei+4+n.length>=vi&&_i(),Ft[Ei]=ni,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n.length,Ft.set(n,Ei+4),Ei+=4+n.length}function Oo(e,t,n){Ei+4+n.length>=vi&&_i(),Ft[Ei]=ii,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n.length,Ft.set(n,Ei+4),Ei+=4+n.length}function Fo(e,t,n){Ei+4+n.length>=vi&&_i(),Ft[Ei]=ri,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n.length,Ft.set(n,Ei+4),Ei+=4+n.length}function Mo(e){Ei+2>=vi&&_i(),Ft[Ei]=oi,Ft[Ei+1]=e,Ei+=2}function xo(e){Ei+2>=vi&&_i(),Ft[Ei]=ai,Ft[Ei+1]=e,Ei+=2}function Uo(e,t){Ei+3>=vi&&_i(),Ft[Ei]=ui,Ft[Ei+1]=e,Ft[Ei+2]=t,Ei+=3}function Do(e,t,n){Ei+4>=vi&&_i(),Ft[Ei]=li,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ei+=4}function Lo(e,t,n,i){Ei+5>=vi&&_i(),Ft[Ei]=ci,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}function Ko(e,t,n,i,r){Ei+6>=vi&&_i(),Ft[Ei]=si,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ft[Ei+5]=r,Ei+=6}function Go(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=fi,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function jo(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=di,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function Vo(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=hi,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function Ho(e,t){Ei+3+t.length>=vi&&_i(),Ft[Ei]=pi,Ft[Ei+1]=e,Ft[Ei+2]=t.length,Ft.set(t,Ei+3),Ei+=3+t.length}function Xo(e,t,n,i,r,o){Ei+7>=vi&&_i(),Ft[Ei]=gi,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i?1:0,Ft[Ei+5]=r,Ft[Ei+6]=o,Ei+=7}function zo(e,t,n,i){Ei+5>=vi&&_i(),Ft[Ei]=mi,Ft[Ei+1]=e,Ft[Ei+2]=t,Ft[Ei+3]=n,Ft[Ei+4]=i,Ei+=5}var qo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.webgl=a();var t=this.webgl,n=0;BK.Director.ticker.add(function(e,i){e-n>10&&(t.glCommit(),n=e)})}return o(e,[{key:"getContext",value:function(){return this.webgl}}]),e}();t.default=qo},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=d(n(0)),u=d(n(5)),l=d(n(1)),c=d(n(28)),s=d(n(27)),f=n(3);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}BK.Director.screenPixelSize.width;var p=GameStatusInfo.QQVer.split("."),g=Number(p[0])>=7&&Number(p[1])>=7,m=10,v=function(){function e(){h(this,e),this.width=0,this.height=0,this.data=new Uint8ClampedArray(0),this.bkbuffer=null}return o(e,[{key:"init",value:function(e){e&&(this.bkbuffer=e,this.data=function(e){var t=new ArrayBuffer(e.bufferLength()),n=new Uint8ClampedArray(t),i=0;for(;i<e.bufferLength();)n[i++]=e.readUint8Buffer();return n}(this.bkbuffer),e.__inner_image_width&&(this.width=e.__inner_image_width),e.__inner_image_height&&(this.height=e.__inner_image_height))}},{key:"getBuffer",value:function(){if(this.data)for(var e=0;e<this.data.byteLength;)this.bkbuffer.writeUint8Buffer(this.data[e++]);return this.bkbuffer}},{key:"writeUint8Buffer",value:function(e){this.bkbuffer&&this.bkbuffer.writeUint8Buffer(e)}}]),e}();var E=function(e){function t(e,n){h(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return BK.Director.root.addChild(i),i.useH5Mode(),i.setTextSize(m),i.fillColor={r:0,g:0,b:0,a:0},i.resetPaint(),i._width=e,i._height=n,i._lastHeight=n,i._lastWidth=e,i.inversMatrix=s.default.create(),i._fontSize=m,i._fontStyle="",i._fillColor=i.fillColor,i._strokeColor=i.strokeColor,i._textList=[],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,BK.Canvas),o(t,[{key:"resetPaint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.style={},this.drawStyle=0,e&&(this.fillColor={r:0,g:0,b:0,a:0},this.strokeColor={r:0,g:0,b:0,a:0},this._fillColor=this.fillColor,this._strokeColor=this.strokeColor,this._textList=[])}},{key:"size",value:function(e,t){this._height=t,this._width=e,this.updateSize()}},{key:"updateSize",value:function(){if(Math.floor(this._lastHeight)!==Math.floor(this._height)||Math.floor(this._lastWidth)!==Math.floor(this._width)){this._height||(this._height=0),this._width||(this._width=0),this.__nativeObj.size={height:this._height,width:this._width},this.__nativeObj.resetCanvas(),this._lastWidth=this._width,this._lastHeight=this._height}else this.globalCompositeOperation="source-over",this.globalAlpha=1,this.setTransform(1,0,0,1,0,0)}},{key:"scale",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this)?r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this).apply(this,arguments):r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canvasScale",this).apply(this,arguments)}},{key:"getContext",value:function(e){return"2d"===e?this:"webgl"===e?(new c.default).getContext():void 0}},{key:"toTempFilePath",value:function(e){return this.toTempFilePathSync(e)}},{key:"toDataURL",value:function(){return this.toDataURL()}},{key:"toTempFilePathSync",value:function(e){var t=new BK.ScreenShot;if("object"===(void 0===e?"undefined":i(e))){var n=e.x,r=e.y,o=e.width,a=e.height;e.destWidth,e.destHeight,e.fileType,e.quality;t.origin={x:n,y:r},t.size={width:o,height:a}}return t.shotToFile()}},{key:"drawImage",value:function(){"object"===i(arguments[0])&&(arguments[0]=arguments[0].src),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"drawImage",this).apply(this,arguments)}},{key:"addEventListener",value:function(e,t){"touchstart"===e&&t?u.default.onTouchStart(t):"touchmove"===e&&t?u.default.onTouchMove(t):"touchend"===e&&t&&u.default.onTouchEnd(t)}},{key:"removeEventListener",value:function(e,t){"touchstart"===e&&u.default.offTouchStart(t)}},{key:"fillText",value:function(){var e=this;if(e._height||(e._height=0),e._width||(e._width=0),3===arguments.length){var n=this.measureText(arguments[0],2048,1024),i=arguments[1],o=arguments[2];switch(1==r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_useH5Mode",this)?2-r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_textBaseLine",this):r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_textBaseLine",this)){case 1:o-=.5*n.height;break;case 2:o-=1*n.height}o-=1*n.height,this.__nativeObj.fillText(arguments[0],i,o,Math.min(2048,n.width),Math.min(1024,n.height))}return 0}},{key:"createImageData",value:function(){if(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createImageData",this)){var e=new v,n=g?r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createImageData",this).apply(this,arguments):void 0;return e.init(n),e}}},{key:"getImageData",value:function(){if(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getImageData",this)){var e=g?r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getImageData",this).apply(this,arguments):void 0,n=new v;return n.init(e),n}}},{key:"putImageData",value:function(e){e instanceof v&&(arguments[0]=e.getBuffer()),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"putImageData",this)&&g&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"putImageData",this).apply(this,arguments)}},{key:"moveTo",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveTo",this)&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveTo",this).apply(this,arguments)}},{key:"lineTo",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"lineTo",this)&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"lineTo",this).apply(this,arguments)}},{key:"fill",value:function(){this._textList=[],r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fill",this)&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fill",this).apply(this,arguments)}},{key:"clear",value:function(){this._textList=[],r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this)&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).apply(this,arguments)}},{key:"clearRect",value:function(e,n,i,o,a){this._textList=[],r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clearRect",this)&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clearRect",this).apply(this,arguments)}},{key:"transform",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"transforms",this).apply(this,arguments)}},{key:"transforms",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"transforms",this).apply(this,arguments)}},{key:"createLinearGradient",value:function(){return{addColorStop:function(){}}}},{key:"strokeText",value:function(){}},{key:"height",set:function(e){this._height=e,this.updateSize()},get:function(){return this._height}},{key:"width",set:function(e){this._width=e,this.updateSize()},get:function(){return this._width}},{key:"fillStyle",set:function(e){var t=0;if(e.includes&&e.includes("#")){if(e.length<9)for(var n=9-e.length,i=0;i<n;i++)e+="f";t=parseInt(e.replace(/^#/,""),16)}else if(e.includes&&e.includes("rgba")){var r=(e=(e=e.replace("rgba(","")).replace(")","")).split(",");t=!1,this.fillColor={r:r[0]>200?1*r[0]/255:r[0],g:r[1]>200?1*r[1]/255:r[1],b:r[2]>200?1*r[2]/255:r[2],a:r[3]>200?1*r[3]/255:r[3]},this._fillColor=this.fillColor}else if(isNaN(e)){var o=(0,f.colourNameToHex)(e);if(o.length<9)for(var u=9-o.length,l=0;l<u;l++)o+="f";o?t=parseInt(o.replace(/^#/,""),16):a.default.d(0,0,"Can not find color for "+o)}else t=parseInt(e);t&&(this.fillColor={r:1*(t>>24&255)/255,g:1*(t>>16&255)/255,b:1*(t>>8&255)/255,a:1*(255&t)/255},this._fillColor=this.fillColor)}},{key:"strokeStyle",set:function(e){var t=0;if(e.includes&&e.includes("#")){if(e.length<9){var n=9-e.length,i="f";isNaN(e.replace(/^#/,""))||0!==parseInt(e.replace(/^#/,""))||(i="0");for(var r=0;r<n;r++)e+=i}t=parseInt(e.replace(/^#/,""),16)}else if(e.includes&&e.includes("rgba")){var o=(e=(e=e.replace("rgba(","")).replace(")","")).split(",");t=!1,this.strokeColor={r:o[0]>200?1*o[0]/255:o[0],g:o[1]>200?1*o[1]/255:o[1],b:o[2]>200?1*o[2]/255:o[2],a:o[3]>200?1*o[3]/255:o[3]},this._strokeColor=this.strokeColor}else if(isNaN(e)){var u=(0,f.colourNameToHex)(e);if(u.length<9)for(var l=9-u.length,c=0;c<l;c++)u+="f";u?t=parseInt(u.replace(/^#/,""),16):a.default.d(0,0,"Can not find color for "+u)}else t=parseInt(e);t&&(this.strokeColor={r:1*(t>>24&255)/255,g:1*(t>>16&255)/255,b:1*(t>>8&255)/255,a:1*(255&t)/255},this._strokeColor=this.strokeColor)}},{key:"font",set:function(e){if(e&&"string"==typeof e){this._fontStyle=e;var t=e.split(" "),n=t.length,i=(n-5>=0&&t[n-5],n-4>=0&&t[n-4],n-3>=0&&t[n-3],n-2>=0?t[n-2]:null),r=n-1>=0?t[n-1]:null;if(i){var o=parseInt(i)||m;this._fontSize=o,this.setTextSize(o)}if(r){var a=void 0;BK.FileUtil.isFileExist(l.default.getPath("res/"+r))&&(a=l.default.getPath("res/"+r)),BK.FileUtil.isFileExist(l.default.getPath("fonts/"+r))&&(a=l.default.getPath("fonts/"+r)),BK.FileUtil.isFileExist(l.default.getPath(r))&&(a=l.default.getPath(r)),a?this.fontPath!==a&&"GameRes://Arial"!==a&&(this.fontPath=a):console.log("Font not exists ## "+r)}}}}]),t}();t.default=E},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2);var o=!0,a=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.query=GameStatusInfo.gameParam,this.shareTicket=i,this.isSticky=r}return i(e,[{key:"getLaunchOptionsSync",value:function(){return{scene:this.scene,query:this.query,isSticky:this.isSticky,shareTicket:this.shareTicket}}},{key:"exitMiniProgram",value:function(){}},{key:"onHide",value:function(e){"function"==typeof e&&BK.QQ.listenGameEventEnterBackground({},e)}},{key:"offHide",value:function(){"function"==typeof callback&&BK.QQ.listenGameEventEnterBackground({},null)}},{key:"onShow",value:function(e){if("function"==typeof e){var t=this;BK.QQ.listenGameEventEnterForeground({scene:t.scene,query:t.getLaunchObject(),shareTicket:t.shareTicket},e),o&&((0,r.setTimeout)(function(){e({scene:t.scene,query:t.getLaunchObject(),shareTicket:t.shareTicket})},0),o=!1)}}},{key:"offShow",value:function(e){"function"==typeof e&&BK.QQ.listenGameEventEnterBackground(null)}},{key:"getLaunchObject",value:function(){var e=GameStatusInfo.gameParam,t={};e&&e.split("&").forEach(function(e){var n=e.split("=")[1],i=e.split("=")[0];t[i]=n});return t}}]),e}();t.default=a},function(e,t,n){;var i;Object.defineProperty(t,"__esModule",{value:!0}),t.requestAnimationFrame=t.cancelAnimationFrame=t.clearTimeout=t.setTimeout=t.clearInterval=t.setInterval=t.Log=t.wx=t.Canvas=t.Image=void 0;var r=A(n(30)),o=A(n(0)),a=A(n(29)),u=A(n(26)),l=A(n(5)),c=n(2),s=A(n(24)),f=A(n(23)),d=A(n(22)),h=A(n(21)),p=A(n(20)),g=A(n(19)),m=A(n(18)),v=(n(17),n(16),n(15),A(n(14))),E=n(13),y=A(n(12)),_=A(n(11)),b=A(n(10)),S=A(n(9)),T=A(n(8));function A(e){return e&&e.__esModule?e:{default:e}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=n(7).DOMParser,k=new r.default(8,"test","test",!0),N=new p.default,I=new m.default,B=new y.default,R=new f.default,P=new _.default,O=new g.default,F=new a.default(1021,85),M=new v.default(F),x=void 0,U=void 0,D=void 0,L=void 0,K=new b.default,G=new S.default,j=new T.default;new BK.Game({onLoad:function(e){BK.Script.log(0,0,"BK.Game, onLoad")},onMaximize:function(e){BK.Script.log(0,0,"BK.Game, onMaxmize")},onMinmize:function(e){BK.Script.log(0,0,"BK.Game, onMinmize")},onEnterBackground:function(e){BK.Script.log(0,0,"BK.Game, onEnterbackground"),D&&D()},onEnterForeground:function(e){BK.Script.log(0,0,"BK.Game, onEnterforeground"),U&&U()},onShare:function(e){if(BK.Script.log(0,0,"BK.Game, onShare"),I&&I.shareCallback){var t=I.shareCallback();if(void 0!==t)return{summary:t.title,extendInfo:{},localPicPath:"",picUrl:t.imageUrl}}},onClose:function(e){BK.Script.log(0,0,"BK.Game, onClose")},onNetWorkChange:function(e,t){if(L){L()}}});var V=(w(i={exitMiniProgram:function(){return k.exitMiniProgram()},getLaunchOptionsSync:function(){return k.getLaunchOptionsSync()},onHide:function(e){return k.onHide(e)},offHide:function(){return k.offHide()},onShow:function(e){return k.onShow(e)},offShow:function(e){return k.offShow(e)},log:function(e,t,n){o.default.d(e,t,n)},createCanvas:function(){return new a.default(BK.Director.screenPixelSize.width,BK.Director.screenPixelSize.height)},createImage:function(){return new u.default},getSystemInfo:function(e){window.setTimeout(function(){e.success({devicePixelRatio:BK.Director.screenPixelSize.width/BK.Director.renderSize.width,brand:"",model:"",pixelRatio:BK.Director.screenPixelSize.width/BK.Director.renderSize.width,screenWidth:BK.Director.renderSize.width,screenHeight:BK.Director.renderSize.height,windowWidth:BK.Director.renderSize.width,windowHeight:BK.Director.renderSize.height,language:"zh_CN",version:GameStatusInfo.QQVer,system:GameStatusInfo.platform+" "+GameStatusInfo.osVersion,platform:GameStatusInfo.platform,fontSizeSetting:"",SDKVersion:"",benchmarkLevel:"",battery:"",wifiSignal:""})},1)},getSystemInfoSync:function(){return{devicePixelRatio:BK.Director.screenPixelSize.width/BK.Director.renderSize.width,brand:"",model:"",pixelRatio:BK.Director.screenPixelSize.width/BK.Director.renderSize.width,screenWidth:BK.Director.renderSize.width,screenHeight:BK.Director.renderSize.height,windowWidth:BK.Director.renderSize.width,windowHeight:BK.Director.renderSize.height,language:"zh_CN",version:GameStatusInfo.QQVer,system:GameStatusInfo.platform+" "+GameStatusInfo.osVersion,platform:GameStatusInfo.platform,fontSizeSetting:"",SDKVersion:"",benchmarkLevel:"",battery:"",wifiSignal:""}},onTouchStart:function(e){l.default.onTouchStart(e)},offTouchStart:function(e){l.default.offTouchStart(e)},onTouchMove:function(e){l.default.onTouchMove(e)},onTouchCancel:function(e){l.default.onTouchCancel(e)},onTouchEnd:function(e){l.default.onTouchEnd(e)}},"offTouchStart",function(e){l.default.offTouchStart(index,1)}),w(i,"offTouchMove",function(e){l.default.offTouchMove(e)}),w(i,"offTouchCancel",function(e){l.default.offTouchCancel(e)}),w(i,"offTouchEnd",function(e){l.default.offTouchEnd(e)}),w(i,"createInnerAudioContext",function(){return new s.default}),w(i,"setPreferredFramesPerSecond",function(e){return(0,c.setPreferredFramesPerSecond)(e)}),w(i,"getUserInfo",function(e){var t={userInfo:{nickName:"",gender:1,language:"zh_CN",city:"",province:"",country:"China",avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJn00QRPUIQXL4HtGLnhzVHTCA4kiaSibn6pcfs0FhWV5SzicglRrKA9wUwxBZIBHNbVWIB9R9IvYBQ/132"},rawData:"",signature:"",encryptedData:"",iv:"",errMsg:"getUserInfo:ok"};BK.QQ.fetchOpenKey(function(n,i,r){0===n&&r&&r.openKey?e.success&&(t.openid=GameStatusInfo.openId,t.openkey=r.openKey,BK.QQ.getRankList(function(n,i,r){if(r&&r.data&&r.data.rankList)for(var o=r.data.rankList,a=0;a<o.length;a++){var u=o[a];u&&u.ownFlag&&1===u.ownFlag&&(t.userInfo.avatarUrl=u.head,t.userInfo.nickName=u.nick,t.rawData=JSON.stringify(t.userInfo),e.success(t),e.complete())}})):(BK.Script.log(0,0,"fetchOpenKey ailed: errCode="+n),e.fail&&e.fail()),e.complete&&e.complete()})}),w(i,"getFileSystemManager",function(){return o.default.d(0,0,"getFileSystemManager"),R}),w(i,"request",function(e){return new d.default(e).request()}),w(i,"downloadFile",function(e){return new d.default(e).downloadFile()}),w(i,"uploadFile",function(e){return new d.default(e).uploadFile()}),w(i,"hideKeyboard",function(e){N.hideKeyboard(e)}),w(i,"onKeyboardInput",function(e){N.onKeyboardInput(e)}),w(i,"offKeyboardInput",function(e){N.offKeyboardInput(e)}),w(i,"onKeyboardConfirm",function(e){N.onKeyboardConfirm(e)}),w(i,"offKeyboardConfirm",function(e){N.offKeyboardConfirm(e)}),w(i,"onKeyboardComplete",function(e){N.onKeyboardComplete(e)}),w(i,"offKeyboardComplete",function(e){N.offKeyboardComplete(e)}),w(i,"showKeyboard",function(e){N.showKeyboard(e)}),w(i,"setKeepScreenOn",function(){}),w(i,"showToast",function(e){K.showToast(e)}),w(i,"hideToast",function(){K.hideToast()}),w(i,"showLoading",function(e){K.showLoading(e)}),w(i,"hideLoading",function(){K.hideLoading()}),w(i,"showModal",function(e){K.showModal(e)}),w(i,"getNetworkType",function(e){j.getNetworkType(e)}),w(i,"checkSession",function(e){O.checkSession(e)}),w(i,"login",function(e){console.log("begin login"),O.login(e)}),w(i,"getShareInfo",function(e){I.getShareInfo(e)}),w(i,"hideShareMenu",function(e){I.hideShareMenu(e)}),w(i,"onShareAppMessage",function(e){I.onShareAppMessage(e)}),w(i,"offShareAppMessage",function(e){I.offShareAppMessage(e)}),w(i,"showShareMenu",function(e){I.showShareMenu(e)}),w(i,"shareAppMessage",function(e){I.shareAppMessage(e)}),w(i,"updateShareMenu",function(e){I.updateShareMenu(e)}),w(i,"getLocation",function(e){if(e)if(e.appid){var t={appid:e.appid,needCity:1};BK.Director.getLocation(t,function(t,n,i){var r=!1;if(0==t){if(i){r=!0;var a={latitude:i.latitude,longitude:i.longitude,speed:i.speed,altitude:i.altitude,verticalAccuracy:i.verticalAccuracy,horizontalAccuracy:i.horizontalAccuracy};e.success&&e.success(a)}}else o.default.d(0,0,"getLocation failed, statusCode="+t);r||e.fail&&e.fail(),e.complete&&e.complete()})}else o.default.d(0,0,"getLocation failed, no appid");else o.default.d(0,0,"getLocation failed, no object")}),w(i,"setStorage",function(e){P.setStorage(e)}),w(i,"setStorageSync",function(e,t){P.setStorageSync(e,t)}),w(i,"getStorage",function(e){P.getStorage(e)}),w(i,"getStorageSync",function(e){return P.getStorageSync(e)}),w(i,"getStorageInfoSync",function(){return P.getStorageInfoSync()}),w(i,"getStorageInfo",function(e){P.getStorageInfo(e)}),w(i,"removeStorage",function(e){P.removeStorage(e)}),w(i,"removeStorageSync",function(e){P.removeStorageSync(e)}),w(i,"clearStorage",function(e){P.clearStorage(e)}),w(i,"clearStorageSync",function(){P.clearStorageSync()}),w(i,"connectSocket",function(e){return console.log("connect socket "),h.default.newConnection(e)}),w(i,"closeSocket",function(e){h.default.closeSocket(e)}),w(i,"onSocketOpen",function(e){console.log("open socket "),h.default.publishEvent(h.default.SOCK_EVENT_OPEN,e)}),w(i,"onSocketClose",function(e){console.log("close socket "),h.default.publishEvent(h.default.SOCK_EVENT_CLOSE,e)}),w(i,"onSocketMessage",function(e){h.default.publishEvent(h.default.SOCK_EVENT_MESSAGE,e)}),w(i,"onSocketError",function(e){h.default.publishEvent(h.default.SOCK_EVENT_ERROR,e)}),w(i,"sendSocketMessage",function(e){h.default.sendMessage(e)}),w(i,"loadFont",function(e){return e}),w(i,"onError",function(){}),w(i,"getFriendCloudStorage",function(e){e&&(BK.Script.log(0,0,"getFriendCloudStorage, object="+JSON.stringify(e)),BK.QQ.getRankList(function(t,n,i){BK.Script.log(0,0,"getRankList, cmd="+n+", errCode="+t+", data="+JSON.stringify(i));var r=[];if(i&&i.data&&i.data.rankList)for(var o=i.data.rankList,a=0;a<o.length;a++){var u=o[a];BK.Script.log(1,1,"rankList i:"+a+" nick:"+u.nick+"  head:"+u.head+" accPoint:"+u.busData.accPoint);var l="";u&&u.ownFlag&&1==u.ownFlag&&(l=GameStatusInfo.openId),r[a]={avatarUrl:u.head,nickname:u.nick,openid:l,KVDataList:[{key:"key_score",value:u.busData.accPoint}]}}BK.Script.log(0,0,"getRankList, result="+JSON.stringify(r)),e.success&&e.success({data:r}),e.complete&&e.complete()}))}),w(i,"getUserCloudStorage",function(e){BK.Script.log(0,0,"getUserCloudStorage, object="+JSON.stringify(e))}),w(i,"getGroupCloudStorage",function(e){BK.Script.log(0,0,"getGroupCloudStorage, object="+JSON.stringify(e))}),w(i,"getSharedCanvas",function(){return F}),w(i,"removeUserCloudStorage",function(e){BK.Script.log(0,0,"removeUserCloudStorage, object="+JSON.stringify(e))}),w(i,"setUserCloudStorage",function(e){if(BK.Script.log(0,0,"setUserCloudStorage, object="+JSON.stringify(e)),e&&e.KVDataList){for(var t=[],n=0,i=0;i<e.KVDataList.length;i++){var r=e.KVDataList[i];if("key_score"==r.key){n=r.value;break}}t[0]={openId:GameStatusInfo.openId,scoreInfo:{score:n}},BK.QQ.scoreUpload(t,function(t,n,i){0==t?e.success&&e.success():e.fail&&e.fail(),e.complete&&e.complete()},null)}}),w(i,"checkIsUserAdvisedToRest",function(e){}),w(i,"createUserInfoButton",function(e){}),w(i,"createOpenSettingButton",function(e){}),w(i,"getSetting",function(e){e.success&&e.success({errMsg:"getSetting:ok",authSetting:{"scope.userInfo":!0,"scope.userLocation":!0,"scope.address":!0,"scope.invoiceTitle":!0,"scope.werun":!0,"scope.record":!0,"scope.writePhotosAlbum":!0,"scope.camera":!0}})}),w(i,"openSetting",function(e){}),w(i,"getWeRunData",function(e){}),w(i,"authorize",function(e){}),w(i,"createGameClubButton",function(e){}),w(i,"openCustomerServiceConversation",function(e){}),w(i,"getOpenDataContext",function(){return o.default.d(0,0,"getOpenDataContext, context="+M),M}),w(i,"onMessage",function(e){o.default.d(0,0,"onMessage, callback="+e),x=e}),w(i,"postMessage",function(e){o.default.d(0,0,"postMessage, messageObj="+JSON.stringify(e)+", bkOnMessageCallback="+x),x&&x(e)}),w(i,"createBannerAd",function(e){if(e)return new E.BannerAd(e.adUnitId,e.style)}),w(i,"createRewardedVideoAd",function(e){if(e)return new E.RewardedVideoAd(e.adUnitId,e.style,e.videoType)}),w(i,"startAccelerometer",function(e){G.startAccelerometer(e)}),w(i,"onAccelerometerChange",function(e){G.onAccelerometerChange(e)}),w(i,"stopAccelerometer",function(e){G.stopAccelerometer(e)}),w(i,"requestMidasPayment",function(e){B.requestMidasPayment(e)}),w(i,"onAudioInterruptionEnd",function(e){U=e}),w(i,"offAudioInterruptionEnd",function(e){U=void 0}),w(i,"onAudioInterruptionBegin",function(e){D=e}),w(i,"offAudioInterruptionBegin",function(e){D=void 0}),w(i,"vibrateLong",function(){console.warn("coming soon")}),w(i,"vibrateShort",function(){BK.Script.log(1,0,"vibrateShort not implement yet")}),w(i,"getPerformance",function(){return{now:function(){return(new Date).getTime()}}}),w(i,"triggerGC",function(){BK.Script.log(1,0,"triggerGC not implement yet")}),w(i,"onNetworkStatusChange",function(e){L=e}),i);V.env={},V.env.USER_DATA_PATH="",t.Image=u.default,t.Canvas=a.default,t.wx=V,t.Log=o.default,t.setInterval=c.setInterval,t.clearInterval=c.clearInterval,t.setTimeout=c.setTimeout,t.clearTimeout=c.clearTimeout,t.cancelAnimationFrame=c.cancelAnimationFrame,t.requestAnimationFrame=c.requestAnimationFrame,window.Image=u.default,window.wx=V,window.setInterval=c.setInterval,window.clearInterval=c.clearInterval,window.setTimeout=c.setTimeout,window.clearTimeout=c.clearTimeout,window.cancelAnimationFrame=c.cancelAnimationFrame,window.requestAnimationFrame=c.requestAnimationFrame,window.DOMParser=C}]);var bkadapter={'version':'c13d472','author' :'tencent\ginsanwang','time' :'Mon Aug 20 2018 11:22:38 GMT+0800 (中国标准时间)'};